webpackJsonp([1],[function(e,t,n){"use strict";n(246);var i=n(91),s=n(3),o=n(162),a=n(159),r=a.render,m=n(238),l=n(143),c=m(i)();r(s.createElement(o,{history:c,routes:l}),document.getElementById("app"))},,,,,,,,function(e,t,n){"use strict";var i=n(24),s=n(85),o="settings",a={autoCollapse:!0,replyLinks:!0,showDead:!1,showDeleted:!1,titleFontSize:18,listSpacing:16,load:function(){var e=s.get(o);e&&i(this,JSON.parse(e))},save:function(){s.set(o,JSON.stringify({autoCollapse:this.autoCollapse,replyLinks:this.replyLinks,showDead:this.showDead,showDeleted:this.showDeleted,titleFontSize:this.titleFontSize,listSpacing:this.listSpacing}))}};e.exports=a},,,,function(e,t,n){"use strict";function i(e,t){a(e).once("value",function(e){t(e.val())})}function s(e,t){function n(n){s.push(n),s.length>=e.length&&t(s)}var s=[];e.forEach(function(e){i(e,n)})}function o(e){return c.child(e)}function a(e){return c.child("item/"+e)}function r(e){return c.child("user/"+e)}function m(){return c.child("updates/items")}var l=n(145),c=new l("https://hacker-news.firebaseio.com/v0");e.exports={fetchItem:i,fetchItems:s,storiesRef:o,itemRef:a,userRef:r,updatesRef:m}},,,,,function(e,t,n){"use strict";var i=n(3),s=i.createClass({displayName:"Spinner",getDefaultProps:function(){return{size:6,spacing:2}},render:function(){var e=this.props.size+"px",t={height:e,width:e,marginRight:this.props.spacing+"px"};return i.createElement("div",{className:"Spinner",style:{width:3*(Number(this.props.size)+Number(this.props.spacing))+"px"}},i.createElement("div",{className:"bounce1",style:t}),i.createElement("div",{className:"bounce2",style:t}),i.createElement("div",{className:"bounce3",style:t}))}});e.exports=s},,,,,,function(e,t){"use strict";function n(e,t){var n=[];"undefined"==typeof t?t=e:n.push(e);for(var i=Object.keys(t),s=0,o=i.length;o>s;s++)t[i[s]]&&n.push(i[s]);return n.join(" ")}e.exports=n},function(e,t){"use strict";function n(e,t,n){for(var i=Object.keys(t),s=0,o=i.length;o>s;s++)e[i[s]]=t[i[s]];if(n)for(i=Object.keys(n),s=0,o=i.length;o>s;s++)e[i[s]]=n[i[s]];return e}e.exports=n},function(e,t,n){"use strict";function i(e){document.title=e?e+" | "+o:o}var s=n(37),o=s.SITE_TITLE;e.exports=i},,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){for(var t=u[e],n=h[e],i=0,s=t.length;s>i;i++)n[i]=p[t[i]]||null}function a(e,t){return e?JSON.parse(e):t}var r=n(87),m=r.EventEmitter,l=n(12),c=n(24),d=null,u={},p={},h={},f=function(e){function t(n){i(this,t),e.call(this),this.type=n,n in u||(u[n]=[]),n in h||(h[n]=[],o(n)),this.onStorage=this.onStorage.bind(this),this.onStoriesUpdated=this.onStoriesUpdated.bind(this)}return s(t,e),t.prototype.getState=function(){return{ids:u[this.type],stories:h[this.type]}},t.prototype.itemUpdated=function(e,t){h[this.type][t]=e,p[e.id]=e},t.prototype.onStorage=function(e){p[e.key]&&this.emit(e.key)},t.prototype.onStoriesUpdated=function(e){u[this.type]=e.val(),o(this.type),this.emit("update",this.getState())},t.prototype.start=function(){d=l.storiesRef(this.type),d.on("value",this.onStoriesUpdated),window.addEventListener("storage",this.onStorage)},t.prototype.stop=function(){null!==d&&(d.off(),d=null),window.removeEventListener("storage",this.onStorage)},t}(m);c(f,{getItem:function(e){return p[e]||null},loadSession:function(){u=a(window.sessionStorage.idCache,{}),p=a(window.sessionStorage.itemCache,{})},saveSession:function(){window.sessionStorage.idCache=JSON.stringify(u),window.sessionStorage.itemCache=JSON.stringify(p)}}),e.exports=f},function(e,t,n){"use strict";function i(e,t){return t.time-e.time}function s(e){var t=Object.keys(e).map(function(t){return e[t]});return t.sort(i),t}function o(){f.comments=a(h.comments),f.stories=a(h.stories)}function a(e){var t=s(e);return t.splice(d,Math.max(0,t.length-d)).forEach(function(t){delete e[t.id]}),t}function r(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];i.deleted||"undefined"!=typeof g[i.type]&&("comment"===i.type?h.comments[i.id]=i:h.stories[i.id]=i)}o(),C.emit("updates",f)}var m=n(87).EventEmitter,l=n(12),c=n(37),d=c.UPDATES_CACHE_SIZE,u=n(24),p=null,h=null,f={},g={comment:!0,job:!0,poll:!0,story:!0},C=u(new m,{loadSession:function(){var e=window.sessionStorage.updates;h=e?JSON.parse(e):{comments:{},stories:{}},o()},saveSession:function(){window.sessionStorage.updates=JSON.stringify(h)},start:function(){null===p&&(p=l.updatesRef(),p.on("value",function(e){l.fetchItems(e.val(),r)}))},stop:function(){p.off(),p=null},getUpdates:function(){return f},getItem:function(e){return h.comments[e]||h.stories[e]||null},getComment:function(e){return h.comments[e]||null},getStory:function(e){return h.stories[e]||null}});C.off=C.removeListener,e.exports=C},function(e,t){"use strict";e.exports={ITEMS_PER_PAGE:30,SITE_TITLE:"React HN",UPDATES_CACHE_SIZE:500}},function(e,t){"use strict";function n(e,t){return(t||",s").split(",")[1===e?0:1]}e.exports=n},function(e,t,n){(function(e,i){function s(e,t){this._id=e,this._clearFn=t}var o=n(86).nextTick,a=Function.prototype.apply,r=Array.prototype.slice,m={},l=0;t.setTimeout=function(){return new s(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,i=arguments.length<2?!1:r.call(arguments,1);return m[n]=!0,o(function(){m[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete m[e]}}).call(t,n(39).setImmediate,n(39).clearImmediate)},,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),s=n(27),o=n(43),a=n(83),r=n(8),m=n(17),l=n(38),c={fetchAncestors:function(e){var t=this;a.fetchCommentAncestors(e,function(e){t.isMounted()&&t.setState({parent:e.parent,op:e.op})})},renderCommentLoading:function(e){return i.createElement("div",{className:"Comment Comment--loading Comment--level"+this.props.level},(this.props.loadingSpinner||e.delayed)&&i.createElement(m,{size:"20"}),e.delayed&&i.createElement("div",{className:"Comment__text"},"Unable to load comment – this usually indicates the author has configured a delay. Trying again in 30 seconds."))},renderCommentDeleted:function(e,t){return i.createElement("div",{className:t.className},i.createElement("div",{className:"Comment__content"},i.createElement("div",{className:"Comment__meta"},"[deleted] | ",i.createElement("a",{href:"https://news.ycombinator.com/item?id="+e.id},"view on Hacker News"))))},renderError:function(e,t){return i.createElement("div",{className:t.className},i.createElement("div",{className:"Comment__content"},i.createElement("div",{className:"Comment__meta"},"[error] | comment is ",JSON.stringify(e)," | ",i.createElement("a",{href:"https://news.ycombinator.com/item?id="+t.id},"view on Hacker News"))))},renderCollapseControl:function(e){return i.createElement("span",{className:"Comment__collapse",onClick:this.toggleCollapse,onKeyPress:this.toggleCollapse,tabIndex:"0"},"[",e?"+":"–","]")},renderCommentMeta:function(e,t){return e.dead&&!r.showDead?i.createElement("div",{className:"Comment__meta"},t.collapsible&&this.renderCollapseControl(t.collapsed),t.collapsible&&" ","[dead]",t.childCounts&&" | ("+t.childCounts.children+" child"+l(t.childCounts.children,",ren"),t.childCounts&&t.childCounts.newComments>0&&", ",t.childCounts&&t.childCounts.newComments>0&&i.createElement("em",null,t.childCounts.newComments," new"),t.childCounts&&")"):i.createElement("div",{className:"Comment__meta"},t.collapsible&&this.renderCollapseControl(t.collapsed),t.collapsible&&" ",i.createElement(s,{to:"/user/"+e.by,className:"Comment__user"},e.by)," ",i.createElement(o,{date:1e3*e.time}),t.link&&" | ",t.link&&i.createElement(s,{to:"/comment/"+e.id},"link"),t.parent&&" | ",t.parent&&i.createElement(s,{to:"/"+this.state.parent.type+"/"+e.parent},"parent"),t.op&&" | on: ",t.op&&i.createElement(s,{to:"/"+this.state.op.type+"/"+this.state.op.id},this.state.op.title),e.dead&&" | [dead]",t.childCounts&&" | ("+t.childCounts.children+" child"+l(t.childCounts.children,",ren"),t.childCounts&&t.childCounts.newComments>0&&", ",t.childCounts&&t.childCounts.newComments>0&&i.createElement("em",null,t.childCounts.newComments," new"),t.childCounts&&")")},renderCommentText:function(e,t){return i.createElement("div",{className:"Comment__text"},!e.dead||r.showDead?i.createElement("div",{dangerouslySetInnerHTML:{__html:e.text}}):"[dead]",r.replyLinks&&t.replyLink&&!e.dead&&i.createElement("p",null,i.createElement("a",{href:"https://news.ycombinator.com/reply?id="+e.id},"reply")))}};e.exports=c},function(e,t,n){"use strict";var i=n(3),s=n(27),o=n(43),a=n(8),r=n(38),m=function(){var e=document.createElement("a");return function(t){e.href=t;var n=e.hostname.split(".").slice(-3);return"www"===n[0]&&n.shift(),n.join(".")}}(),l={renderItemMeta:function(e,t){var n=new Date(1e3*e.time);return"job"===e.type?i.createElement("div",{className:"Item__meta"},i.createElement(o,{date:n,className:"Item__time"})):i.createElement("div",{className:"Item__meta"},i.createElement("span",{className:"Item__score"},e.score," point",r(e.score))," ",i.createElement("span",{className:"Item__by"},"by ",i.createElement(s,{to:"/user/"+e.by},e.by))," ",i.createElement(o,{date:n,className:"Item__time"})," | ",i.createElement(s,{to:"/"+e.type+"/"+e.id},e.descendants>0?e.descendants+" comment"+r(e.descendants):"discuss"),t)},renderItemTitle:function(e){var t,n=!!e.url;return t=e.dead?"[dead] "+e.title:n?i.createElement("a",{href:e.url},e.title):i.createElement(s,{to:"/"+e.type+"/"+e.id},e.title),i.createElement("div",{className:"Item__title",style:{fontSize:a.titleFontSize}},t,n&&" ",n&&i.createElement("span",{className:"Item__host"},"(",m(e.url),")"))}};e.exports=l},function(e,t,n){"use strict";function i(e,t){this.itemId=e.id,this.onCommentsChanged=t,this.children={},this.children[e.id]=[],this.isNew={},this.isCollapsed={}}var s=n(24);s(i.prototype,{getChildCounts:function(e){for(var t=0,n=0,i=[e.id];i.length;){for(var s=[],o=0,a=i.length;a>o;o++){var r=this.children[i[o]];r.length&&s.push.apply(s,r)}for(o=0,a=s.length;a>o;o++)this.isNew[s[o]]&&n++;t+=s.length,i=s}return{children:t,newComments:n}},commentAdded:function(e){e.deleted||(this.children[e.id]=[],this.children[e.parent].push(e.id))},commentDeleted:function(e){if(e){var t=this.children[e.parent];t.splice(t.indexOf(e.id),1)}},toggleCollapse:function(e){this.isCollapsed[e]=!this.isCollapsed[e],this.onCommentsChanged({type:"collapse"})}}),e.exports=i},function(e,t,n){"use strict";function i(e){var t=l.get(e);return t?JSON.parse(t):{lastVisit:null,commentCount:0,maxCommentId:0}}function s(e,t,n){o.call(this,e,t),this.startedLoading=Date.now(),this.parents={},this.commentCount=0,this.newCommentCount=0,this.maxCommentId=0,this.loading=!0,this.expectedComments=e.kids?e.kids.length:0,this.itemDescendantCount=e.descendants;var s=i(e.id);this.lastVisit=s.lastVisit,this.prevMaxCommentId=s.maxCommentId,this.isFirstVisit=null===s.lastVisit,n.cached||this.checkLoadCompletion()}var o=n(55),a=n(8),r=n(144),m=n(24),l=(n(38),n(85));s.loadState=i,s.prototype=m(Object.create(o.prototype),{constructor:s,numberOfCommentsChanged:r(function(){this.onCommentsChanged({type:"number"})},123),firstLoadComplete:function(){this.lastVisit=Date.now(),this.prevMaxCommentId=this.maxCommentId,this.isFirstVisit=!1,this.onCommentsChanged({type:"first_load_complete"})},checkLoadCompletion:function(){this.loading&&this.commentCount>=this.expectedComments&&(this.loading=!1,this.isFirstVisit?this.firstLoadComplete():a.autoCollapse&&this.newCommentCount>0&&this.collapseThreadsWithoutNewComments(),this._storeState())},_storeState:function(){l.set(this.itemId,JSON.stringify({lastVisit:Date.now(),commentCount:this.itemDescendantCount,maxCommentId:this.maxCommentId}))},itemUpdated:function(e){this.itemDescendantCount=e.descendants},commentAdded:function(e){return e.deleted?void(this.loading&&(this.expectedComments--,this.checkLoadCompletion())):(o.prototype.commentAdded.call(this,e),e.dead&&!a.showDead?this.expectedComments--:this.commentCount++,this.loading&&e.kids&&(this.expectedComments+=e.kids.length),this.prevMaxCommentId>0&&e.id>this.prevMaxCommentId&&(!e.dead||a.showDead)&&(this.newCommentCount++,this.isNew[e.id]=!0),e.id>this.maxCommentId&&(this.maxCommentId=e.id),e.parent!==this.itemId&&(this.parents[e.id]=e.parent),this.numberOfCommentsChanged(),void(this.loading&&this.checkLoadCompletion()))},commentDelayed:function(e){this.expectedComments--},commentDeleted:function(e){o.prototype.commentDeleted.call(this,e),this.commentCount--,this.isNew[e.id]&&(this.newCommentCount--,delete this.isNew[e.id]),delete this.parents[e.id],this.numberOfCommentsChanged()},commentDied:function(e){a.showDead||(this.commentCount--,this.isNew[e.id]&&(this.newCommentCount--,delete this.isNew[e.id]))},adjustExpectedComments:function(e){this.expectedComments+=e,this.checkLoadCompletion()},collapseThreadsWithoutNewComments:function(){for(var e=Object.keys(this.isNew),t={},n=0,i=e.length;i>n;n++)for(var s=this.parents[e[n]];s&&!t[s];)t[s]=!0,s=this.parents[s];for(var o={},a=this.children[this.itemId];a.length;){var r=[];for(n=0,i=a.length;i>n;n++){var m=a[n];if(t[m]){var l=this.children[m];l.length&&r.push.apply(r,l)}else this.isNew[m]||(o[m]=!0)}a=r}this.isCollapsed=o,this.onCommentsChanged({type:"collapse"})},markAsRead:function(){this.lastVisit=Date.now(),this.newCommentCount=0,this.prevMaxCommentId=this.maxCommentId,this.isNew={},this._storeState()},dispose:function(){this.numberOfCommentsChanged.cancel(),this._storeState()}}),e.exports=s},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),s=n(22),o=n(55),a=n(12),r=n(8),m=n(53),l=n(23),c=i.createClass({displayName:"Comment",mixins:[m,s],propTypes:{id:i.PropTypes.number.isRequired,level:i.PropTypes.number.isRequired,loadingSpinner:i.PropTypes.bool,threadStore:i.PropTypes.instanceOf(o).isRequired},getDefaultProps:function(){return{loadingSpinner:!1}},getInitialState:function(){return{comment:{}}},componentWillMount:function(){this.bindFirebaseRef()},componentWillUnmount:function(){this.clearDelayTimeout()},componentDidUpdate:function(e,t){if(!this.state.comment)return void this.props.threadStore.adjustExpectedComments(-1);if(t.comment&&t.comment.id){if(!t.comment.deleted&&this.state.comment.deleted&&this.props.threadStore.commentDeleted(this.state.comment),!t.comment.dead&&this.state.comment.dead)this.props.threadStore.commentDied(this.state.comment);else if(t.comment!==this.state.comment&&this.props.threadStore.loading){var n=this.state.comment.kids?this.state.comment.kids.length:0,i=t.comment.kids?t.comment.kids.length:0;this.props.threadStore.adjustExpectedComments(n-i)}}else this.state.comment.id&&(t.comment&&t.comment.delayed&&this.clearDelayTimeout(),this.props.threadStore.commentAdded(this.state.comment)),t.comment&&!t.comment.delayed&&this.state.comment.delayed&&this.props.threadStore.commentDelayed(this.props.id)},bindFirebaseRef:function(){this.bindAsObject(a.itemRef(this.props.id),"comment",this.handleFirebaseRefCancelled),this.timeout&&(this.timeout=null)},handleFirebaseRefCancelled:function(e){this.unbind("comment"),this.timeout=setTimeout(this.bindFirebaseRef,3e4),this.state.comment&&!this.state.comment.delayed&&(this.state.comment.delayed=!0,this.forceUpdate())},clearDelayTimeout:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},toggleCollapse:function(e){e.preventDefault(),this.props.threadStore.toggleCollapse(this.state.comment.id)},render:function(){var e=this.state.comment,t=this.props;if(!e)return this.renderError(e,{id:this.props.id,className:"Comment Comment--error Comment--level"+t.level});if(!e.id)return this.renderCommentLoading(e);if(e.dead&&!r.showDead)return null;if(e.deleted)return r.showDeleted?this.renderCommentDeleted(e,{className:"Comment Comment--deleted Comment--level"+t.level}):null;var n=t.threadStore.isNew[e.id],s=!!t.threadStore.isCollapsed[e.id],o=s&&t.threadStore.getChildCounts(e);s&&n&&(o.newComments=0);var a=l("Comment Comment--level"+t.level,{"Comment--collapsed":s,"Comment--dead":e.dead,"Comment--new":n});return i.createElement("div",{className:a},i.createElement("div",{className:"Comment__content"},this.renderCommentMeta(e,{collapsible:!0,collapsed:s,link:!0,childCounts:o}),this.renderCommentText(e,{replyLink:!0})),e.kids&&i.createElement("div",{className:"Comment__kids"},e.kids.map(function(e){return i.createElement(c,{key:e,id:e,level:t.level+1,loadingSpinner:t.loadingSpinner,threadStore:t.threadStore})})))}});e.exports=c},function(e,t,n){"use strict";var i=n(3),s=n(27),o=i.createClass({displayName:"Paginator",_onClick:function(e){setTimeout(function(){window.scrollTo(0,0)},0)},render:function(){return 1!==this.props.page||this.props.hasNext?i.createElement("div",{className:"Paginator"},this.props.page>1&&i.createElement("span",{className:"Paginator__prev"},i.createElement(s,{to:"/"+this.props.route,query:{page:this.props.page-1},onClick:this._onClick},"Prev")),this.props.page>1&&this.props.hasNext&&" | ",this.props.hasNext&&i.createElement("span",{className:"Paginator__next"},i.createElement(s,{to:"/"+this.props.route,query:{page:this.props.page+1},onClick:this._onClick},"More"))):null}});e.exports=o},function(e,t,n){"use strict";var i=n(3),s=n(27),o=n(8),a=n(23),r={getNewCommentCount:function(e,t){return null===t.lastVisit?0:e.descendants-t.commentCount},renderListItem:function(e,t){if(e.deleted)return null;var n=this.getNewCommentCount(e,t);return i.createElement("li",{className:a("ListItem",{"ListItem--dead":e.dead}),style:{marginBottom:o.listSpacing}},this.renderItemTitle(e),this.renderItemMeta(e,n>0&&i.createElement("span",{className:"ListItem__newcomments"}," ","(",i.createElement(s,{to:"/"+e.type+"/"+e.id},n," new"),")")))}};e.exports=r},function(e,t){"use strict";var n={getPageNumber:function(e){return"undefined"==typeof e&&(e=this.props.location.query.page),e&&/^\d+$/.test(e)?Math.max(1,Number(e)):1}};e.exports=n},function(e,t,n){(function(t){"use strict";function i(e,t,n){for(var i=e.id,o=e.parent;m[o]||l[o];){if(n.itemCount++,n.cacheHits++,l[o])return 1===n.itemCount&&(n.parent=l[o]),n.op=l[o],void t(n);m[o]&&(1===n.itemCount&&(n.parent={id:o,type:"comment"}),i=o,o=m[o])}c.getItem(o,function(e){n.itemCount++,m[i]=o,"comment"===e.type&&(m[e.id]=e.parent),s(e,t,n)},n)}function s(e,t,n){1===n.itemCount&&(n.parent=e),"comment"!==e.type?(n.op=e,l[e.id]={id:e.id,type:e.type,title:e.title},t(n)):i(e,t,n)}var o=n(12),a=n(35),r=n(36),m={},l={},c={getItem:function(e,n,i){var s=this.getCachedItem(e);s?(i&&i.cacheHits++,t(n,s)):o.fetchItem(e,n)},getCachedItem:function(e){return a.getItem(e)||r.getItem(e)||null},getCachedStory:function(e){return a.getItem(e)||r.getStory(e)||null},fetchCommentAncestors:function(e,n){var s=Date.now(),o={itemCount:0,cacheHits:0};i(e,function(){o.timeTaken=Date.now()-s,t(n,o)},o)}};e.exports=c}).call(t,n(39).setImmediate)},function(e,t){"use strict";function n(e,t,n){var i=(e-1)*t,s=Math.min(n,i+t),o=n-1>s;return{pageNum:e,startIndex:i,endIndex:s,hasNext:o}}e.exports=n},function(e,t){"use strict";e.exports={get:function(e,t){var n=window.localStorage[e];return"undefined"!=typeof n?n:t},set:function(e,t){window.localStorage[e]=t}}},function(e,t){function n(){l=!1,a.length?m=a.concat(m):c=-1,m.length&&i()}function i(){if(!l){var e=setTimeout(n);l=!0;for(var t=m.length;t;){for(a=m,m=[];++c<t;)a&&a[c].run();c=-1,t=m.length}a=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,r=e.exports={},m=[],l=!1,c=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=o,r.addListener=o,r.once=o,r.off=o,r.removeListener=o,r.removeAllListeners=o,r.emit=o,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),s=n(27),o=n(138),a=n(35),r=n(36),m=n(8),l=i.createClass({displayName:"App",getInitialState:function(){return{showSettings:!1}},componentWillMount:function(){m.load(),a.loadSession(),r.loadSession(),window.addEventListener("beforeunload",this.handleBeforeUnload)},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},handleBeforeUnload:function(){a.saveSession(),r.saveSession()},toggleSettings:function(e){e.preventDefault(),this.setState({showSettings:!this.state.showSettings})},render:function(){return i.createElement("div",{className:"App",onClick:this.state.showSettings&&this.toggleSettings},i.createElement("div",{className:"App__wrap"},i.createElement("div",{className:"App__header"},i.createElement("img",{src:"img/logo.png",width:"16",height:"16",alt:""})," ",i.createElement(s,{to:"/news",activeClassName:"active",className:"App__homelink"},"React HN")," ",i.createElement(s,{to:"/newest",activeClassName:"active"},"new")," | ",i.createElement(s,{to:"/newcomments",activeClassName:"active"},"comments")," "," | ",i.createElement(s,{to:"/show",activeClassName:"active"},"show")," | ",i.createElement(s,{to:"/ask",activeClassName:"active"},"ask")," | ",i.createElement(s,{to:"/jobs",activeClassName:"active"},"jobs"),i.createElement("a",{className:"App__settings",tabIndex:"0",onClick:this.toggleSettings,onKeyPress:this.toggleSettings},this.state.showSettings?"hide settings":"settings"),this.state.showSettings&&i.createElement(o,{key:"settings"})),i.createElement("div",{className:"App__content"},this.props.children),i.createElement("div",{className:"App__footer"},"react-hn v1.4.3 | ",i.createElement("a",{href:"https://github.com/insin/react-hn"},"insin/react-hn"))))}});e.exports=l},function(e,t,n){"use strict";var i=n(3),s=n(8),o=n(53),a=n(23),r=i.createClass({displayName:"DisplayComment",mixins:[o],propTypes:{comment:i.PropTypes.object.isRequired},getInitialState:function(){return{op:{},parent:{type:"comment"}}},componentWillMount:function(){this.fetchAncestors(this.props.comment)},render:function(){if(this.props.comment.deleted)return null;if(this.props.comment.dead&&!s.showDead)return null;var e=this.props.comment,t=a("Comment Comment--level0",{"Comment--dead":e.dead});return i.createElement("div",{className:t},i.createElement("div",{className:"Comment__content"},this.renderCommentMeta(e,{link:!0,parent:!!this.state.parent.id&&!!this.state.op.id&&e.parent!==this.state.op.id,op:!!this.state.op.id}),this.renderCommentText(e,{replyLink:!1})))}});e.exports=r},function(e,t,n){"use strict";var i=n(3),s=n(56),o=n(54),a=n(81),r=i.createClass({displayName:"DisplayListItem",mixins:[o,a],propTypes:{item:i.PropTypes.object.isRequired},componentWillMount:function(){this.threadState=s.loadState(this.props.item.id)},render:function(){return this.renderListItem(this.props.item,this.threadState)}});e.exports=r},function(e,t,n){"use strict";function i(e,t,n){return 1===e?t:e+" "+t+"s"}var s=n(3),o=n(22),a=n(43),r=n(12),m=n(56),l=n(83),c=n(79),d=n(137),u=n(17),p=n(54),h=n(23),f=n(25),g=s.createClass({displayName:"Item",mixins:[p,o],getInitialState:function(){return{item:l.getCachedStory(Number(this.props.params.id))||{}}},componentWillMount:function(){this.bindAsObject(r.itemRef(this.props.params.id),"item"),this.state.item.id&&(this.threadStore=new m(this.state.item,this.handleCommentsChanged,{cached:!0}),f(this.state.item.title)),window.addEventListener("beforeunload",this.handleBeforeUnload)},componentWillUnmount:function(){this.threadStore&&this.threadStore.dispose(),window.removeEventListener("beforeunload",this.handleBeforeUnload)},componentWillReceiveProps:function(e){if(this.props.params.id!==e.params.id){this.threadStore.dispose(),this.threadStore=null,this.unbind("item");var t=l.getCachedStory(Number(e.params.id));t&&(this.threadStore=new m(t,this.handleCommentsChanged,{cached:!0}),f(t.title)),this.bindAsObject(r.itemRef(e.params.id),"item"),this.setState({item:t||{}})}},componentWillUpdate:function(e,t){!this.state.item.id&&t.item.id&&f(t.item.title)},componentDidUpdate:function(e,t){if(t.item.id!==this.state.item.id)this.threadStore&&this.threadStore.itemId===this.state.item.id||(this.threadStore=new m(this.state.item,this.handleCommentsChanged,{cached:!1}),f(this.state.item.title),this.forceUpdate());else if(t.item!==this.state.item){if(this.threadStore.loading){var n=this.state.item.kids?this.state.item.kids.length:0,i=t.item.kids?t.item.kids.length:0,s=n-i;0!==s&&this.threadStore.adjustExpectedComments(s)}this.threadStore.itemUpdated(this.state.item)}},handleBeforeUnload:function(){this.threadStore&&this.threadStore.dispose()},handleCommentsChanged:function(e){this.forceUpdate()},autoCollapse:function(e){e.preventDefault(),this.threadStore.collapseThreadsWithoutNewComments()},markAsRead:function(e){e.preventDefault(),this.threadStore.markAsRead(),this.forceUpdate()},render:function(){var e=this.state,t=e.item,n=this.threadStore;return t.id&&n?s.createElement("div",{className:h("Item",{"Item--dead":t.dead})},s.createElement("div",{className:"Item__content"},this.renderItemTitle(t),this.renderItemMeta(t,null!==n.lastVisit&&n.newCommentCount>0&&s.createElement("span",null," ","(",s.createElement("em",null,n.newCommentCount," new")," in the last ",s.createElement(a,{date:n.lastVisit,formatter:i}),") | ",s.createElement("span",{className:"control",tabIndex:"0",onClick:this.autoCollapse,onKeyPress:this.autoCollapse,title:"Collapse threads without new comments"},"auto collapse")," | ",s.createElement("span",{className:"control",tabIndex:"0",onClick:this.markAsRead,onKeyPress:this.markAsRead},"mark as read"))),t.text&&s.createElement("div",{className:"Item__text"},s.createElement("div",{dangerouslySetInnerHTML:{__html:t.text}})),"poll"===t.type&&s.createElement("div",{className:"Item__poll"},t.parts.map(function(e){return s.createElement(d,{key:e,id:e})}))),t.kids&&s.createElement("div",{className:"Item__kids"},t.kids.map(function(e,t){return s.createElement(c,{key:e,id:e,level:0,loadingSpinner:0===t,threadStore:n})}))):s.createElement("div",{className:"Item Item--loading"},s.createElement(u,{size:"20"}))}});e.exports=g},function(e,t,n){"use strict";var i=n(3),s=i.createClass({displayName:"NotFound",render:function(){return i.createElement("h2",null,"Not found")}});e.exports=s},function(e,t,n){"use strict";var i=n(3),s=n(22),o=n(55),a=n(12),r=n(8),m=n(36),l=n(79),c=n(53),d=n(23),u=n(25),p=i.createClass({displayName:"PermalinkedComment",mixins:[c,s],getDefaultProps:function(){return{level:0,loadingSpinner:!0}},getInitialState:function(){return{comment:m.getComment(this.props.params.id)||{},parent:{type:"comment"},op:{}}},componentWillMount:function(){this.bindAsObject(a.itemRef(this.props.params.id),"comment"),this.state.comment.id&&this.commentLoaded(this.state.comment)},componentWillReceiveProps:function(e){if(e.params.id!==this.props.params.id){var t=m.getComment(e.params.id);t&&(this.commentLoaded(t),this.setState({comment:t})),this.unbind("comment"),this.bindAsObject(a.itemRef(e.params.id),"comment")}},componentWillUpdate:function(e,t){if(t.comment&&this.state.comment.id!==t.comment.id){if(!t.comment.deleted&&"comment"!==t.comment.type)return void this.context.router.replaceWith(t.comment.type,{id:t.comment.id});this.threadStore&&this.threadStore.itemId===t.comment.id||this.commentLoaded(t.comment)}},commentLoaded:function(e){this.setTitle(e),e.deleted||(this.threadStore=new o(e,this.handleCommentsChanged),this.fetchAncestors(e))},setTitle:function(e){if(e.deleted)return u("Deleted comment");var t="Comment by "+e.by;this.state.op.id&&(t+=" | "+this.state.op.title),u(t)},handleCommentsChanged:function(e){"collapse"===e.type&&this.forceUpdate()},render:function(){var e=this.state.comment;if(!e)return this.renderError(e,{id:this.props.params.id,className:"Comment Comment--level0 Comment--error"});if(!e.id)return this.renderCommentLoading(e);if(e.deleted)return this.renderCommentDeleted(e,{className:"Comment Comment--level0 Comment--deleted"});if("comment"!==e.type)return null;var t=d("PermalinkedComment Comment Comment--level0",{"Comment--dead":e.dead}),n=this.threadStore;return i.createElement("div",{className:t},i.createElement("div",{className:"Comment__content"},this.renderCommentMeta(e,{parent:!!this.state.parent.id&&!!this.state.op.id&&e.parent!==this.state.op.id,op:!!this.state.op.id}),(!e.dead||r.showDead)&&this.renderCommentText(e,{replyLink:!0})),e.kids&&i.createElement("div",{className:"Comment__kids"},e.kids.map(function(e,t){return i.createElement(l,{key:e,id:e,level:0,loadingSpinner:0===t,threadStore:n})})))}});e.exports=p},function(e,t,n){"use strict";var i=n(3),s=n(22),o=n(12),a=n(17),r=n(38),m=i.createClass({displayName:"PollOption",mixins:[s],getInitialState:function(){return{pollopt:{}}},componentWillMount:function(){this.bindAsObject(o.itemRef(this.props.id),"pollopt")},render:function(){var e=this.state.pollopt;return e.id?i.createElement("div",{className:"PollOption"},i.createElement("div",{className:"PollOption__text"},e.text),i.createElement("div",{className:"PollOption__score"},e.score," point",r(e.score))):i.createElement("div",{className:"PollOption PollOption--loading"},i.createElement(a,{size:"20"}))}});e.exports=m},function(e,t,n){"use strict";var i=n(3),s=n(8),o=i.createClass({displayName:"Settings",componentDidMount:function(){this.refs.container.focus()},onChange:function(e){var t=e.target;"checkbox"===t.type?s[t.name]=t.checked:"number"===t.type&&t.value&&(s[t.name]=t.value),this.forceUpdate(),s.save()},onClick:function(e){e.stopPropagation()},render:function(){return i.createElement("div",{ref:"container",className:"Settings",tabIndex:"-1",onClick:this.onClick},i.createElement("form",{onChange:this.onChange},i.createElement("div",{className:"Settings__setting Settings__setting--checkbox"},i.createElement("label",{htmlFor:"autoCollapse"},i.createElement("input",{type:"checkbox",name:"autoCollapse",id:"autoCollapse",checked:s.autoCollapse})," auto collapse"),i.createElement("p",null,"Automatically collapse comment threads without new comments on page load.")),i.createElement("div",{className:"Settings__setting Settings__setting--checkbox"},i.createElement("label",{htmlFor:"replyLinks"},i.createElement("input",{type:"checkbox",name:"replyLinks",id:"replyLinks",checked:s.replyLinks})," show reply links"),i.createElement("p",null,'Show "reply" links to Hacker News')),i.createElement("div",{className:"Settings__setting Settings__setting--checkbox"},i.createElement("label",{htmlFor:"showDead"},i.createElement("input",{type:"checkbox",name:"showDead",id:"showDead",checked:s.showDead})," show dead"),i.createElement("p",null,"Show items flagged as dead.")),i.createElement("div",{className:"Settings__setting Settings__setting--checkbox"},i.createElement("label",{htmlFor:"showDeleted"},i.createElement("input",{type:"checkbox",name:"showDeleted",
id:"showDeleted",checked:s.showDeleted})," show deleted"),i.createElement("p",null,"Show comments flagged as deleted in threads.")),i.createElement("div",{className:"Settings__setting"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",null,i.createElement("label",{htmlFor:"titleFontSize"},"title font size:")),i.createElement("td",null,i.createElement("input",{type:"number",min:"13.333",step:"1",name:"titleFontSize",id:"titleFontSize",value:s.titleFontSize}))),i.createElement("tr",null,i.createElement("td",null,i.createElement("label",{htmlFor:"listSpacing"},"list spacing:")),i.createElement("td",null,i.createElement("input",{type:"number",min:"0",name:"listSpacing",id:"listSpacing",value:s.listSpacing}))))))))}});e.exports=o},function(e,t,n){"use strict";var i=n(3),s=n(35),o=n(82),a=n(80),r=n(17),m=n(140),l=n(8),c=n(37),d=c.ITEMS_PER_PAGE,u=n(84),p=n(25),h=i.createClass({displayName:"Stories",mixins:[o],propTypes:{limit:i.PropTypes.number.isRequired,route:i.PropTypes.string.isRequired,type:i.PropTypes.string.isRequired,title:i.PropTypes.string},getInitialState:function(){return{ids:[],limit:this.props.limit,stories:[]}},componentWillMount:function(){p(this.props.title),this.store=new s(this.props.type),this.store.addListener("update",this.handleUpdate),this.store.start(),this.setState(this.store.getState())},componentWillUnmount:function(){this.store.removeListener("update",this.handleUpdate),this.store.stop(),this.store=null},handleUpdate:function(e){this.isMounted()&&(e.limit=e.ids.length,this.setState(e))},render:function(){var e=u(this.getPageNumber(),d,this.state.limit);if(0===this.state.stories.length&&0===this.state.ids.length){for(var t=[],n=e.startIndex;n<e.endIndex;n++)t.push(i.createElement("li",{key:n,className:"ListItem ListItem--loading",style:{marginBottom:l.listSpacing}},i.createElement(r,null)));return i.createElement("div",{className:"Items Items--loading"},i.createElement("ol",{className:"Items__list",start:e.startIndex+1},t),i.createElement(a,{route:this.props.route,page:e.pageNum,hasNext:e.hasNext}))}return i.createElement("div",{className:"Items"},i.createElement("ol",{className:"Items__list",start:e.startIndex+1},this.renderItems(e.startIndex,e.endIndex)),i.createElement(a,{route:this.props.route,page:e.pageNum,hasNext:e.hasNext}))},renderItems:function(e,t){for(var n=[],s=e;t>s;s++){var o=this.state.stories[s],a=this.state.ids[s];a?n.push(i.createElement(m,{key:a,id:a,index:s,cachedItem:o,store:this.store})):n.push(i.createElement(m,{cachedItem:o,store:this.store}))}return n}});e.exports=h},function(e,t,n){"use strict";var i=n(3),s=n(22),o=n(56),a=n(12),r=n(8),m=n(35),l=n(54),c=n(81),d=n(17),u=i.createClass({displayName:"StoryListItem",mixins:[l,c,s],propTypes:{store:i.PropTypes.instanceOf(m).isRequired,id:i.PropTypes.number,cachedItem:i.PropTypes.object,index:i.PropTypes.number},getDefaultProps:function(){return{id:null,cachedItem:null,index:null}},getInitialState:function(){return{item:this.props.cachedItem||{}}},componentWillMount:function(){null!=this.props.id?this.initLiveItem(this.props):null!=this.props.cachedItem&&(this.threadState=o.loadState(this.state.item.id))},componentWillUnmount:function(){null!=this.props.id&&this.props.store.removeListener(this.props.id,this.updateThreadState)},componentWillReceiveProps:function(e){null==this.props.id&&null!=e.id&&this.initLiveItem(e)},componentWillUpdate:function(e,t){this.state.item!==t.item&&null!=t.item&&this.props.store.itemUpdated(t.item,this.props.index)},initLiveItem:function(e){this.bindAsObject(a.itemRef(e.id),"item"),this.threadState=o.loadState(e.id),this.props.store.addListener(e.id,this.updateThreadState)},updateThreadState:function(){this.threadState=o.loadState(this.props.id),this.forceUpdate()},render:function(){return this.state.item&&this.state.item.id?this.renderListItem(this.state.item,this.threadState):i.createElement("li",{className:"ListItem ListItem--loading",style:{marginBottom:r.listSpacing}},i.createElement(d,null))}});e.exports=u},function(e,t,n){"use strict";function i(e){return!e.dead}function s(e){return a.showDead?e:{comments:e.comments.filter(i),stories:e.stories.filter(i)}}var o=n(3),a=n(8),r=n(36),m=n(133),l=n(132),c=n(80),d=n(17),u=n(82),p=n(37),h=p.ITEMS_PER_PAGE,f=n(84),g=n(25),C=o.createClass({displayName:"Updates",mixins:[u],getInitialState:function(){return s(r.getUpdates())},componentWillMount:function(){this.setTitle(this.props.type),r.start(),r.on("updates",this.handleUpdates)},componentWillUnmount:function(){r.off("updates",this.handleUpdates),r.stop()},componentWillReceiveProps:function(e){this.props.type!==e.type&&this.setTitle(e.type)},setTitle:function(e){g("New "+("comments"===e?"Comments":"Links"))},handleUpdates:function(e){this.isMounted()&&this.setState(s(e))},render:function(){var e="comments"===this.props.type?this.state.comments:this.state.stories;if(0===e.length)return o.createElement("div",{className:"Updates Updates--loading"},o.createElement(d,{size:"20"}));var t=f(this.getPageNumber(),h,e.length);return"comments"===this.props.type?o.createElement("div",{className:"Updates Comments"},e.slice(t.startIndex,t.endIndex).map(function(e){return o.createElement(l,{key:e.id,id:e.id,comment:e})}),o.createElement(c,{route:"newcomments",page:t.pageNum,hasNext:t.hasNext})):o.createElement("div",{className:"Updates Items"},o.createElement("ol",{className:"Items__list",start:t.startIndex+1},e.slice(t.startIndex,t.endIndex).map(function(e){return o.createElement(m,{key:e.id,item:e})})),o.createElement(c,{route:"newest",page:t.pageNum,hasNext:t.hasNext}))}});e.exports=C},function(e,t,n){"use strict";var i=n(3),s=n(22),o=n(43),a=n(12),r=n(17),m=n(25),l=i.createClass({displayName:"UserProfile",mixins:[s],getInitialState:function(){return{user:{}}},componentWillMount:function(){this.bindAsObject(a.userRef(this.props.params.id),"user")},componentWillUpdate:function(e,t){this.state.user.id!==t.user.id&&m("Profile: "+t.user.id)},componentWillReceiveProps:function(e){this.props.params.id!==e.params.id&&(this.unbind("user"),this.bindAsObject(a.userRef(e.params.id),"user"))},render:function(){var e=this.state.user;if(!e.id)return i.createElement("div",{className:"UserProfile UserProfile--loading"},i.createElement("h4",null,this.props.params.id),i.createElement(r,{size:"20"}));var t=new Date(1e3*e.created);return i.createElement("div",{className:"UserProfile"},i.createElement("h4",null,e.id),i.createElement("dl",null,i.createElement("dt",null,"Created"),i.createElement("dd",null,i.createElement(o,{date:t})," (",t.toDateString(),")"),i.createElement("dt",null,"Karma"),i.createElement("dd",null,e.karma),i.createElement("dt",null,"Delay"),i.createElement("dd",null,e.delay),e.about&&i.createElement("dt",null,"About"),e.about&&i.createElement("dd",null,i.createElement("div",{className:"UserProfile__about",dangerouslySetInnerHTML:{__html:e.about}}))))}});e.exports=l},function(e,t,n){"use strict";function i(e,t,n,i){return r.createClass({render:function(){return r.createElement(p,o({},this.props,{key:e,route:e,type:t,limit:n,title:i}))}})}function s(e){return r.createClass({render:function(){return r.createElement(h,o({},this.props,{key:e,type:e}))}})}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(160),r=n(3),m=n(161),l=n(131),c=n(134),d=n(135),u=n(136),p=n(139),h=n(141),f=n(142),g=i("ask","askstories",200,"Ask"),C=s("comments"),v=i("jobs","jobstories",200,"Jobs"),y=i("newest","newstories",500,"New Links"),E=i("show","showstories",200,"Show"),w=i("news","topstories",500);e.exports=r.createElement(m,{path:"/",component:l},r.createElement(a,{component:w}),r.createElement(m,{path:"news",component:w}),r.createElement(m,{path:"newest",component:y}),r.createElement(m,{path:"show",component:E}),r.createElement(m,{path:"ask",component:g}),r.createElement(m,{path:"jobs",component:v}),r.createElement(m,{path:"item/:id",component:c}),r.createElement(m,{path:"job/:id",component:c}),r.createElement(m,{path:"poll/:id",component:c}),r.createElement(m,{path:"story/:id",component:c}),r.createElement(m,{path:"comment/:id",component:u}),r.createElement(m,{path:"newcomments",component:C}),r.createElement(m,{path:"user/:id",component:f}),r.createElement(m,{path:"*",component:d}))},function(e,t){"use strict";function n(e,t,n){var i,s,o,a,r,m=function c(){var m=Date.now()-a;t>m&&m>0?i=setTimeout(c,t-m):(i=null,n||(r=e.apply(o,s),i||(o=s=null)))},l=function(){o=this,s=arguments,a=Date.now();var l=n&&!i;return i||(i=setTimeout(m,t)),l&&(r=e.apply(o,s),o=s=null),r};return l.cancel=function(){i&&clearTimeout(i)},l}e.exports=n}]);
//# sourceMappingURL=app.js.map