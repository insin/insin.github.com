!function e(t,s,a){function n(r,o){if(!s[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(i)return i(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var d=s[r]={exports:{}};t[r][0].call(d.exports,function(e){var s=t[r][1][e];return n(s?s:e)},d,d.exports,e,t,s,a)}return s[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)n(a[r]);return n}({1:[function(e){"use strict";function t(e){return 1==e?"":"s"}function s(e){document.title=e?e+" | "+v:v}function a(e){var t,s=!!e.url;return t=e.dead?"[dead] "+e.title:s?o.DOM.a({href:e.url},e.title):c({to:e.type,params:{id:e.id}},e.title),o.DOM.div({className:"Item__title"},t,s&&" ",s&&o.DOM.span({className:"Item__host"},"(",g(e.url),")"))}function n(e,s){var a=r(1e3*e.time),n="job"!=e.type;return o.DOM.div({className:"Item__meta"},n&&o.DOM.span({className:"Item__score"},e.score," point",t(e.score))," ",n&&o.DOM.span({className:"Item__by"},"by ",c({to:"user",params:{id:e.by}},e.by))," ",o.DOM.span({className:"Item__time"},a.fromNow()),n&&s&&" | ",n&&s&&c({to:e.type,params:{id:e.id}},"comments"))}var i=e("firebase"),r=e("moment"),o=e("react/addons"),l=e("reactfire"),m=e("react-router");window.React=o;var d=o.addons.classSet,p=m.DefaultRoute,c=m.Link,u=m.Navigation,h=m.NotFoundRoute,f=m.Route,O=m.Routes,M="https://hacker-news.firebaseio.com/v0/item/",N=30,v="React Hacker News",_="https://hacker-news.firebaseio.com/v0/topstories",D="https://hacker-news.firebaseio.com/v0/user/",g=function(){var e=document.createElement("a");return function(t){e.href=t;var s=e.hostname.split(".").slice(-3);return"www"===s[0]&&s.shift(),s.join(".")}}(),b=o.createClass({displayName:"NotFound",render:function(){return o.DOM.h2(null,"Not found")}}),y=o.createClass({displayName:"User",mixins:[l],getInitialState:function(){return{user:{}}},componentWillMount:function(){this.bindAsObject(new i(D+this.props.params.id),"user")},componentWillUpdate:function(e,t){this.state.user.id!=t.user.id&&s("Profile: "+t.user.id)},componentWillReceiveProps:function(e){this.props.params.id!=e.params.id&&(this.unbind("user"),this.bindAsObject(new i(D+e.params.id),"user"))},render:function(){var e=this.state.user;if(!e.id)return o.DOM.div({className:"User User--loading"});var t=r(1e3*e.created);return o.DOM.div({className:"User"},o.DOM.h4(null,e.id),o.DOM.dl(null,o.DOM.dt(null,"Created"),o.DOM.dd(null,t.fromNow()," (",t.format("LL"),")"),o.DOM.dt(null,"Karma"),o.DOM.dd(null,e.karma),o.DOM.dt(null,"Delay"),o.DOM.dd(null,e.delay),e.about&&o.DOM.dt(null,"About"),e.about&&o.DOM.dd(null,o.DOM.div({className:"User__about",dangerouslySetInnerHTML:{__html:e.about}}))))}}),C=o.createClass({displayName:"Comment",mixins:[l,u],getInitialState:function(){return{comment:{},collapsed:!1}},componentWillMount:function(){this.bindAsObject(new i(M+(this.props.id||this.props.params.id)),"comment")},componentWillUpdate:function(e,t){if(this.isTopLevel()&&this.state.comment.id!=t.comment.id){if("comment"!=t.comment.type)return void this.replaceWith(t.comment.type,{id:t.comment.id});s("Comment by "+t.comment.by)}},componentWillReceiveProps:function(e){this.isTopLevel()&&this.props.params.id!=e.params.id&&(this.unbind("comment"),this.bindAsObject(new i(M+e.params.id),"comment"))},isTopLevel:function(){return!!this.props.params},toggleCollapsed:function(){this.setState({collapsed:!this.state.collapsed})},render:function(){var e=this.state.comment;if(!e.id)return o.DOM.div({className:"Comment Comment--loading"});if("comment"!=e.type)return null;if(e.deleted&&!e.kids)return null;var t=d({Comment:!0,"Comment--deleted":e.deleted,"Comment--dead":e.dead,"Comment--collapsed":this.state.collapsed}),s=r(1e3*e.time),a=this.isTopLevel();return o.DOM.div({className:t},e.deleted&&o.DOM.div({className:"Comment__meta"},this.renderCollapseControl()," ","[deleted]"),!e.deleted&&o.DOM.div({className:"Comment__meta"},this.renderCollapseControl()," ",c({to:"user",params:{id:e.by},className:"Comment__meta__user"},e.by)," ",s.fromNow(),!a&&" | ",!a&&c({to:"comment",params:{id:e.id}},"link"),a&&" | ",a&&c({to:"comment",params:{id:e.parent}},"parent"),e.dead&&o.DOM.span(null," | [dead]")),!e.deleted&&o.DOM.div({className:"Comment__text"},o.DOM.div({dangerouslySetInnerHTML:{__html:e.text}})),e.kids&&o.DOM.div({className:"Comment__kids"},e.kids.map(function(e){return C({key:e,id:e})})))},renderCollapseControl:function(){return o.DOM.span({className:"Comment__collapse",onClick:this.toggleCollapsed,onKeyPress:this.toggleCollapsed,tabIndex:"0"},"[",this.state.collapsed?"+":"â€“","]")}}),I=o.createClass({displayName:"PollOption",mixins:[l],getInitialState:function(){return{pollopt:{}}},componentWillMount:function(){this.bindAsObject(new i(M+this.props.id),"pollopt")},render:function(){var e=this.state.pollopt;return e.id?o.DOM.div({className:"PollOption"},o.DOM.div({className:"PollOption__text"},e.text),o.DOM.div({className:"PollOption__score"},e.score," point",t(e.score))):o.DOM.div({className:"PollOption PollOption--loading"})}}),w=o.createClass({displayName:"Item",mixins:[l],getInitialState:function(){return{item:{}}},componentWillMount:function(){this.bindAsObject(new i(M+(this.props.id||this.props.params.id)),"item")},componentWillUpdate:function(e,t){this.state.item.id!=t.item.id&&s(t.item.title)},componentWillReceiveProps:function(e){this.props.params.id!=e.params.id&&(this.unbind("item"),this.bindAsObject(new i(M+e.params.id),"item"))},render:function(){var e=this.state.item;return e.id?o.DOM.div({className:d({Item:!0,"Item--dead":e.dead})},a(e),n(e),e.text&&o.DOM.div({className:"Item__text"},o.DOM.div({dangerouslySetInnerHTML:{__html:e.text}})),"poll"==e.type&&o.DOM.div({className:"Item__poll"},e.parts.map(function(e){return I({key:e,id:e})})),e.kids&&o.DOM.div({className:"Item__kids"},e.kids.map(function(e){return C({key:e,id:e})}))):o.DOM.div({className:"Item Item--loading"})}}),x=o.createClass({displayName:"ListItem",mixins:[l],getInitialState:function(){return{item:{}}},componentWillMount:function(){this.bindAsObject(new i(M+this.props.id||this.props.params.id),"item")},render:function(){var e=this.state.item;return e.id?o.DOM.li({className:d({ListItem:!0,"ListItem--dead":e.dead})},a(e),n(e,!0)):o.DOM.li({className:"ListItem ListItem--loading"})}}),k=o.createClass({displayName:"Items",mixins:[l],getInitialState:function(){return{items:[]}},componentWillMount:function(){this.bindAsObject(new i(_),"items"),s()},getPage:function(){return this.props.query.page&&/^\d+$/.test(this.props.query.page)?Math.max(1,Number(this.props.query.page)):1},render:function(){if(0===this.state.items.length)return o.DOM.div({className:"Items Items--loading"});var e=this.getPage(),t=(e-1)*N,s=t+N,a=this.state.items.slice(t,s),n=s<this.state.items.length-1;return o.DOM.div({className:"Items"},e>1&&P({route:"news",page:e,hasNext:n}),o.DOM.ol({className:"Items__list",start:t+1},a.map(function(e){return x({key:e,id:e})})),P({route:"news",page:e,hasNext:n}))}}),P=o.createClass({displayName:"Paginator",render:function(){return o.DOM.div({className:"Paginator"},this.props.page>1&&o.DOM.span({className:"Paginator__prev"},c({to:this.props.route,query:{page:this.props.page-1}},"Prev")),this.props.page>1&&this.props.hasNext&&" | ",this.props.hasNext&&o.DOM.span({className:"Paginator__next"},c({to:this.props.route,query:{page:this.props.page+1}},"More")))}}),L=o.createClass({displayName:"App",render:function(){return o.DOM.div({className:"App"},o.DOM.div({className:"App__header"},o.DOM.img({src:"logo.png",width:"16",height:"16",alt:""})," ",c({to:"news",className:"App__homelink"},"React Hacker News")),o.DOM.div({className:"App__content"},this.props.activeRouteHandler(null)))}}),A=O({location:"hash"},f({name:"app",path:"/",handler:L},p({handler:k}),h({handler:b}),f({name:"news",path:"news",handler:k}),f({name:"item",path:"item/:id",handler:w}),f({name:"job",path:"job/:id",handler:w}),f({name:"poll",path:"poll/:id",handler:w}),f({name:"story",path:"story/:id",handler:w}),f({name:"comment",path:"comment/:id",handler:C}),f({name:"user",path:"user/:id",handler:y})));o.renderComponent(A,document.getElementById("app"))},{firebase:"firebase",moment:"moment","react-router":"react-router","react/addons":"react/addons",reactfire:"reactfire"}]},{},[1]);