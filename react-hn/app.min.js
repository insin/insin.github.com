!function e(t,s,i){function n(r,o){if(!s[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var d=s[r]={exports:{}};t[r][0].call(d.exports,function(e){var s=t[r][1][e];return n(s?s:e)},d,d.exports,e,t,s,i)}return s[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e){"use strict";function t(e){return 1==e?"":"s"}function s(e){document.title=e?e+" | "+v:v}function i(e){var t,s=!!e.url;return t=e.dead?"[dead] "+e.title:s?o.DOM.a({href:e.url},e.title):c({to:e.type,params:{id:e.id}},e.title),o.DOM.div({className:"Item__title"},t,s&&" ",s&&o.DOM.span({className:"Item__host"},"(",g(e.url),")"))}function n(e,s){var i=r(1e3*e.time),n="job"!=e.type;return o.DOM.div({className:"Item__meta"},n&&o.DOM.span({className:"Item__score"},e.score," point",t(e.score))," ",n&&o.DOM.span({className:"Item__by"},"by ",c({to:"user",params:{id:e.by}},e.by))," ",o.DOM.span({className:"Item__time"},i.fromNow()),n&&s&&" | ",n&&s&&c({to:e.type,params:{id:e.id}},e.kids&&e.kids.length>0?"comment":"discuss"))}var a=e("firebase"),r=e("moment"),o=e("react/addons"),l=e("reactfire"),m=e("react-router");window.React=o;var d=o.addons.classSet,p=m.DefaultRoute,c=m.Link,u=m.Navigation,h=m.NotFoundRoute,f=m.Route,O=m.Routes,M="https://hacker-news.firebaseio.com/v0/item/",N=30,v="React Hacker News",D="https://hacker-news.firebaseio.com/v0/topstories",_="https://hacker-news.firebaseio.com/v0/user/",g=function(){var e=document.createElement("a");return function(t){e.href=t;var s=e.hostname.split(".").slice(-3);return"www"===s[0]&&s.shift(),s.join(".")}}(),y=o.createClass({displayName:"Spinner",getDefaultProps:function(){return{size:6,spacing:2}},render:function(){var e=this.props.size+"px",t={height:e,width:e,marginRight:this.props.spacing+"px"};return o.DOM.div({className:"Spinner",style:{width:3*(this.props.size+this.props.spacing)+"px"}},o.DOM.div({className:"bounce1",style:t}),o.DOM.div({className:"bounce2",style:t}),o.DOM.div({className:"bounce3",style:t}))}}),b=o.createClass({displayName:"NotFound",render:function(){return o.DOM.h2(null,"Not found")}}),I=o.createClass({displayName:"User",mixins:[l],getInitialState:function(){return{user:{}}},componentWillMount:function(){this.bindAsObject(new a(_+this.props.params.id),"user")},componentWillUpdate:function(e,t){this.state.user.id!=t.user.id&&s("Profile: "+t.user.id)},componentWillReceiveProps:function(e){this.props.params.id!=e.params.id&&(this.unbind("user"),this.bindAsObject(new a(_+e.params.id),"user"))},render:function(){var e=this.state.user;if(!e.id)return o.DOM.div({className:"User User--loading"},o.DOM.h4(null,this.props.params.id),y({size:"20"}));var t=r(1e3*e.created);return o.DOM.div({className:"User"},o.DOM.h4(null,e.id),o.DOM.dl(null,o.DOM.dt(null,"Created"),o.DOM.dd(null,t.fromNow()," (",t.format("LL"),")"),o.DOM.dt(null,"Karma"),o.DOM.dd(null,e.karma),o.DOM.dt(null,"Delay"),o.DOM.dd(null,e.delay),e.about&&o.DOM.dt(null,"About"),e.about&&o.DOM.dd(null,o.DOM.div({className:"User__about",dangerouslySetInnerHTML:{__html:e.about}}))))}}),C=o.createClass({displayName:"Comment",mixins:[l,u],getDefaultProps:function(){return{showSpinnerDeep:!1}},getInitialState:function(){return{comment:{},collapsed:!1}},componentWillMount:function(){this.bindAsObject(new a(M+(this.props.id||this.props.params.id)),"comment")},componentWillUpdate:function(e,t){if(this.isTopLevel()&&this.state.comment.id!=t.comment.id){if("comment"!=t.comment.type)return void this.replaceWith(t.comment.type,{id:t.comment.id});s("Comment by "+t.comment.by)}},componentWillReceiveProps:function(e){this.isTopLevel()&&this.props.params.id!=e.params.id&&(this.unbind("comment"),this.bindAsObject(new a(M+e.params.id),"comment"))},isTopLevel:function(){return!!this.props.params},toggleCollapsed:function(){this.setState({collapsed:!this.state.collapsed})},render:function(){var e=this.state.comment,t=this.isTopLevel(),s=this.props.showSpinnerDeep;if(!e.id)return o.DOM.div({className:"Comment Comment--loading"},(t||s)&&y({size:"20"}));if("comment"!=e.type)return null;if(e.deleted&&!e.kids)return null;var i=d({Comment:!0,"Comment--deleted":e.deleted,"Comment--dead":e.dead,"Comment--collapsed":this.state.collapsed}),n=r(1e3*e.time);return o.DOM.div({className:i},e.deleted&&o.DOM.div({className:"Comment__meta"},this.renderCollapseControl()," ","[deleted]"),!e.deleted&&o.DOM.div({className:"Comment__meta"},this.renderCollapseControl()," ",c({to:"user",params:{id:e.by},className:"Comment__meta__user"},e.by)," ",n.fromNow(),!t&&" | ",!t&&c({to:"comment",params:{id:e.id}},"link"),t&&" | ",t&&c({to:"comment",params:{id:e.parent}},"parent"),e.dead&&o.DOM.span(null," | [dead]")),!e.deleted&&o.DOM.div({className:"Comment__text"},o.DOM.div({dangerouslySetInnerHTML:{__html:e.text}})),e.kids&&o.DOM.div({className:"Comment__kids"},e.kids.map(function(e,i){return C({key:e,id:e,showSpinnerDeep:s||t&&0===i})})))},renderCollapseControl:function(){return o.DOM.span({className:"Comment__collapse",onClick:this.toggleCollapsed,onKeyPress:this.toggleCollapsed,tabIndex:"0"},"[",this.state.collapsed?"+":"â€“","]")}}),w=o.createClass({displayName:"PollOption",mixins:[l],getInitialState:function(){return{pollopt:{}}},componentWillMount:function(){this.bindAsObject(new a(M+this.props.id),"pollopt")},render:function(){var e=this.state.pollopt;return e.id?o.DOM.div({className:"PollOption"},o.DOM.div({className:"PollOption__text"},e.text),o.DOM.div({className:"PollOption__score"},e.score," point",t(e.score))):o.DOM.div({className:"PollOption PollOption--loading"})}}),x=o.createClass({displayName:"Item",mixins:[l],getInitialState:function(){return{item:{}}},componentWillMount:function(){this.bindAsObject(new a(M+(this.props.id||this.props.params.id)),"item")},componentWillUpdate:function(e,t){this.state.item.id!=t.item.id&&s(t.item.title)},componentWillReceiveProps:function(e){this.props.params.id!=e.params.id&&(this.unbind("item"),this.bindAsObject(new a(M+e.params.id),"item"))},render:function(){var e=this.state.item;return e.id?o.DOM.div({className:d({Item:!0,"Item--dead":e.dead})},i(e),n(e),e.text&&o.DOM.div({className:"Item__text"},o.DOM.div({dangerouslySetInnerHTML:{__html:e.text}})),"poll"==e.type&&o.DOM.div({className:"Item__poll"},e.parts.map(function(e){return w({key:e,id:e})})),e.kids&&o.DOM.div({className:"Item__kids"},e.kids.map(function(e,t){return C({key:e,id:e,showSpinnerDeep:0===t})}))):o.DOM.div({className:"Item Item--loading"},y({size:"20"}))}}),k=o.createClass({displayName:"ListItem",mixins:[l],getInitialState:function(){return{item:{}}},componentWillMount:function(){this.bindAsObject(new a(M+this.props.id||this.props.params.id),"item")},render:function(){var e=this.state.item;return e.id?e.deleted?null:o.DOM.li({className:d({ListItem:!0,"ListItem--dead":e.dead})},i(e),n(e,!0)):o.DOM.li({className:"ListItem ListItem--loading"},y(null))}}),P=o.createClass({displayName:"Items",mixins:[l],getInitialState:function(){return{items:[]}},componentWillMount:function(){this.bindAsObject(new a(D),"items"),s()},getPage:function(){return this.props.query.page&&/^\d+$/.test(this.props.query.page)?Math.max(1,Number(this.props.query.page)):1},render:function(){var e=this.getPage(),t=(e-1)*N;if(0===this.state.items.length){for(var s=[],i=0;N>i;i++)s.push(o.DOM.li({className:"ListItem ListItem--loading"},y(null)));return o.DOM.div({className:"Items Items--loading"},o.DOM.ol({className:"Items__list",start:t+1},s))}var n=t+N,a=this.state.items.slice(t,n),r=n<this.state.items.length-1;return o.DOM.div({className:"Items"},e>1&&L({route:"news",page:e,hasNext:r}),o.DOM.ol({className:"Items__list",start:t+1},a.map(function(e){return k({key:e,id:e})})),L({route:"news",page:e,hasNext:r}))}}),L=o.createClass({displayName:"Paginator",render:function(){return o.DOM.div({className:"Paginator"},this.props.page>1&&o.DOM.span({className:"Paginator__prev"},c({to:this.props.route,query:{page:this.props.page-1}},"Prev")),this.props.page>1&&this.props.hasNext&&" | ",this.props.hasNext&&o.DOM.span({className:"Paginator__next"},c({to:this.props.route,query:{page:this.props.page+1}},"More")))}}),S=o.createClass({displayName:"App",render:function(){return o.DOM.div({className:"App"},o.DOM.div({className:"App__header"},o.DOM.img({src:"logo.png",width:"16",height:"16",alt:""})," ",c({to:"news",className:"App__homelink"},"React Hacker News")),o.DOM.div({className:"App__content"},this.props.activeRouteHandler(null)))}}),A=O({location:"hash"},f({name:"app",path:"/",handler:S},p({handler:P}),h({handler:b}),f({name:"news",path:"news",handler:P}),f({name:"item",path:"item/:id",handler:x}),f({name:"job",path:"job/:id",handler:x}),f({name:"poll",path:"poll/:id",handler:x}),f({name:"story",path:"story/:id",handler:x}),f({name:"comment",path:"comment/:id",handler:C}),f({name:"user",path:"user/:id",handler:I})));o.renderComponent(A,document.getElementById("app"))},{firebase:"firebase",moment:"moment","react-router":"react-router","react/addons":"react/addons",reactfire:"reactfire"}]},{},[1]);