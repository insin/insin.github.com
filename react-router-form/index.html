<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>react-router-form</title>
  <script src="http://fb.me/react-0.12.2.js"></script>
  <script src="http://fb.me/JSXTransformer-0.12.2.js"></script>
  <script src="https://cdn.rawgit.com/rackt/react-router/master/dist/react-router.js"></script>
  <script src="react-router-form.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
  <style>
  body {
    font-family: 'Open Sans', sans-serif;
  }
  .Contact {
    width: 200px;
    display: inline-block;
    margin-right: 1em;
    margin-bottom: 1em;
    vertical-align: top;
    text-align: center;
  }
  .Contact img {
    width: 100%;
    border-radius: 50%;
  }
  </style>
</head>
<body>
<p>
  Reuses components from the <a href="http://react-router-mega-demo.herokuapp.com/">React Router Mega Demo</a>,
  but uses the <code>&lt;Form&gt;</code> component from <a href="https://github.com/insin/react-router-form">react-router-form</a>
  to automatically retrieve and submit GET form data.
</p>
<div id="app"></div>
<script type="text/jsx;harmony=true">void function() { 'use strict';

var CONTACTS = [{
  first: 'Ryan',
  last: 'Florence',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/ryan.jpg'
}, {
  first: 'Michael',
  last: 'Jackson',
  avatar: 'https://pbs.twimg.com/profile_images/555089763489689600/dhab7R3J.png'
}, {
  first: 'Jeremy',
  last: 'Ashkenas',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/jeremy.jpg'
}, {
  first: 'Yehuda',
  last: 'Katz',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/yehuda.jpg'
}, {
  first: 'Tom',
  last: 'Dale',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/tom.jpg'
}, {
  first: 'Pete',
  last: 'Hunt',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/pete.jpg'
}, {
  first: 'Misko',
  last: 'Hevery',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/misko.png'
}, {
  first: 'Scott',
  last: 'Miles',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/scott.png'
}, {
  first: 'Matt',
  last: 'Zabriskie',
  avatar: 'http://ryanflorence.com/jsconf-avatars/avatars/matt.jpeg'
}]

var Form = ReactRouterForm
var {DefaultRoute, Link, Navigation, Route, RouteHandler} = ReactRouter

var App = React.createClass({
  render() {
    return <div className="App">
      <RouteHandler/>
    </div>
  }
})

var Contacts = React.createClass({
  render() {
    return <div>
      <h2>Contacts</h2>

      <Link to="newContact">New Contact</Link>
      <hr/>
      {CONTACTS.map(contact => <div className="Contact">
        <h3>{contact.first} {contact.last}</h3>
        <img src={contact.avatar}/>
      </div>)}
      <hr/>
      <Link to="newContact">New Contact</Link>
    </div>
  }
})

var NewContact = React.createClass({
  render() {
    return <div>
      <h1>New Contact</h1>
      <div>
        <Form to="createContact">
          <p><input name="first" placeholder="first name"/></p>
          <p><input name="last" placeholder="last name"/></p>
          <p><input name="avatar" placeholder="avatar url"/></p>
          <p><button type="submit">Add</button></p>
        </Form>
      </div>
    </div>
  }
})

var CreateContact = React.createClass({
  statics: {
    willTransitionTo: function(transition, params, query) {
      CONTACTS.push(query)
      transition.redirect('/')
    }
  },

  render() {
    return null
  }
})

var routes = <Route name="contacts" path="/" handler={App}>
  <DefaultRoute handler={Contacts}/>
  <Route name="newContact" handler={NewContact}/>
  <Route name="createContact" handler={CreateContact}/>
</Route>

ReactRouter.run(routes, function(Handler, state) {
  React.render(<Handler/>, document.getElementById('app'))
})

}()</script>
</body>