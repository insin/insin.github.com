require=function t(e,o,n){function s(a,r){if(!o[a]){if(!e[a]){var c="function"==typeof require&&require;if(!r&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=o[a]={exports:{}};e[a][0].call(d.exports,function(t){var o=e[a][1][t];return s(o?o:t)},d,d.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({wdPnkL:[function(t,e){"use strict";e.exports={LOCALSTORAGE_PREFIX:"reactodo:",ENTER_KEY:13,ESCAPE_KEY:27,NBSP:" ",UP_ARROW:"↑",DOWN_ARROW:"↓",CHECK:"X",SETTINGS:"★",DRAG_HANDLE:"☰",STOP:"■"}},{}],Constants:[function(t,e){e.exports=t("wdPnkL")},{}],KUu2PW:[function(t,e){"use strict";var o={WELCOME:1,SETTINGS:2,TODO_LISTS:3};e.exports=o},{}],Page:[function(t,e){e.exports=t("KUu2PW")},{}],Project:[function(t,e){e.exports=t("SRZLho")},{}],SRZLho:[function(t,e){"use strict";var o=t("Constants"),n=t("TodoItem"),s=t("classNames"),i=React.createClass({displayName:"Project",getInitialState:function(){return{dragoverTodoId:null,dragoverDoing:!1}},addTodo:function(){this.props.onAddTodo(this.props.project)},deleteDoneTodos:function(){confirm("Are you sure you want to delete all completed TODOs in "+this.props.project.name+"?")&&this.props.onDeleteDoneTodos(this.props.project)},handleDragEnterDoing:function(t){t.preventDefault()},handleDragOverDoing:function(t){t.preventDefault(),t.nativeEvent.dataTransfer.dropEffect="move",this.state.dragoverDoing||this.setState({dragoverTodoId:null,dragoverDoing:!0})},handeDragLeaveDoing:function(){this.state.dragoverDoing&&this.setState({dragoverDoing:!1})},handleDropDoing:function(t){t.preventDefault();var e=t.nativeEvent.dataTransfer.getData("text");this.state.dragoverDoing&&this.setState({dragoverTodoId:null,dragoverDoing:!1}),this.props.onDoTodo(this.props.project,this.props.project.todos[e])},onToggleTodo:function(t){this.props.onToggleTodo(this.props.project,t)},onDoTodo:function(t){this.props.onDoTodo(this.props.project,t)},stopDoingTodo:function(){this.props.onStopDoingTodo(this.props.project)},onEditTodo:function(t,e){this.props.onEditTodo(this.props.project,t,e)},onDeleteTodo:function(t){this.props.onDeleteTodo(this.props.project,t)},onDragOverTodo:function(t){this.state.dragoverTodoId!=t.id&&this.setState({dragoverTodoId:t.id})},onDragLeaveTodo:function(){this.setState({dragoverTodoId:null})},onDragEndTodo:function(){this.setState({dragoverTodoId:null,dragoverDoing:!1})},onMoveTodo:function(t,e){this.props.onMoveTodo(this.props.project,t,e)},render:function(){var t,e=[],i=[];this.props.project.todos.forEach(function(o,s){var a=this.props.project.doing===o.id,r=n({key:o.id,todo:o,index:s,dragover:this.state.dragoverTodoId===o.id,initialEdit:this.props.editTodoId===o.id,doing:a,onEdit:this.onEditTodo,onToggle:this.onToggleTodo,onDo:this.onDoTodo,onDelete:this.onDeleteTodo,onDragOver:this.onDragOverTodo,onDragLeave:this.onDragLeaveTodo,onDragEnd:this.onDragEndTodo,onMoveTodo:this.onMoveTodo});a?t=r:(o.done?i:e).push(r)}.bind(this));var a;i.length>0&&(a=React.DOM.h2(null,"[DONE] ",React.DOM.span({className:"control",title:"Delete all completed TODOs",onClick:this.deleteDoneTodos},"-")));var r;return t&&(r=React.DOM.span({className:"control",title:"Stop doing this",onClick:this.stopDoingTodo},o.STOP)),React.DOM.div({className:"project"},React.DOM.h2(null,"[DOING] ",r),React.DOM.div({className:s("dropzone doing-dropzone",{empty:null===this.props.project.doing,dragover:this.state.dragoverDoing}),onDragEnter:this.handleDragEnterDoing,onDragOver:this.handleDragOverDoing,onDragLeave:this.handeDragLeaveDoing,onDrop:this.handleDropDoing},t||"Drop a TODO here when it's in progress"),React.DOM.h2(null,"[TODO] ",React.DOM.span({className:"control",title:"Add TODO",onClick:this.addTodo},"+")),e,a,i)}});e.exports=i},{Constants:"wdPnkL",TodoItem:"ELQgmj",classNames:"iaR6wB"}],Reactodo:[function(t,e){e.exports=t("MWVVbi")},{}],MWVVbi:[function(t,e){"use strict";var o=t("Constants"),n=t("Page"),s=t("Project"),i=t("Settings"),a=t("Welcome"),r=t("classNames"),c=t("extend"),d=t("partial"),l=t("uuid"),p=React.createClass({displayName:"Reactodo",getInitialState:function(){var t=localStorage[o.LOCALSTORAGE_PREFIX+this.props.session],e=t?JSON.parse(t):{},s=c({activeProjectId:null,editTodoId:null,projects:[]},e);return s.page=s.projects.length?n.TODO_LISTS:n.WELCOME,s},componentDidUpdate:function(){localStorage[o.LOCALSTORAGE_PREFIX+this.props.session]=JSON.stringify({activeProjectId:this.state.activeProjectId,projects:this.state.projects})},setPage:function(t){this.setState({page:t})},setActiveProject:function(t){this.setState({activeProjectId:t,page:n.TODO_LISTS})},addProject:function(t){var e=l();this.state.projects.push({id:e,name:t,doing:null,todos:[]}),this.setState({projects:this.state.projects})},editProjectName:function(t,e){t.name=e,this.setState({projects:this.state.projects})},moveProjectUp:function(t,e){this.state.projects.splice(e-1,0,this.state.projects.splice(e,1)[0]),this.setState({projects:this.state.projects})},moveProjectDown:function(t,e){this.state.projects.splice(e+1,0,this.state.projects.splice(e,1)[0]),this.setState({projects:this.state.projects})},toggleProjectVisible:function(t){t.hidden=!t.hidden,this.setState({projects:this.state.projects})},deleteProject:function(t,e){this.state.projects.splice(e,1);var o=this.state.activeProjectId;0===this.state.projects.length?o=null:o===t.id&&(o=e<=this.state.projects.length-1?this.state.projects[e].id:this.state.projects[e-1].id),this.setState({activeProjectId:o,projects:this.state.projects})},addTodo:function(t){var e=l();t.todos.unshift({id:e,done:!1,text:""}),this.setState({editTodoId:e,projects:this.state.projects})},editTodo:function(t,e,o){e.text=o,this.setState({editTodoId:null,projects:this.state.projects})},moveTodo:function(t,e,o){t.todos.splice(o,0,t.todos.splice(e,1)[0]),this.setState({projects:this.state.projects})},toggleTodo:function(t,e){e.done=!e.done,t.doing===e.id&&(t.doing=null),this.setState({projects:this.state.projects})},doTodo:function(t,e){t.doing=e.id,e.done&&(e.done=!1),this.setState({projects:this.state.projects})},stopDoingTodo:function(t){t.doing=null,this.setState({projects:this.state.projects})},deleteTodo:function(t,e){for(var o=0,n=t.todos.length;n>o;o++)if(t.todos[o].id===e.id)return t.todos.splice(o,1),t.doing===e.id&&(t.doing=null),this.setState({projects:this.state.projects})},deleteDoneTodos:function(t){t.todos=t.todos.filter(function(t){return!t.done}),this.setState({projects:this.state.projects})},render:function(){var t,e=[];return this.state.page===n.WELCOME?t=a({session:this.props.session,onShowSettings:d(this.setPage,n.SETTINGS)}):this.state.page===n.SETTINGS&&(t=i({projects:this.state.projects,onAddProject:this.addProject,onEditProjectName:this.editProjectName,onMoveProjectUp:this.moveProjectUp,onMoveProjectDown:this.moveProjectDown,onToggleProjectVisible:this.toggleProjectVisible,onDeleteProject:this.deleteProject})),this.state.projects.forEach(function(o){if(!o.hidden){var i=this.state.page===n.TODO_LISTS&&this.state.activeProjectId===o.id;e.push(React.DOM.li({key:o.id,className:r({active:i}),onClick:!i&&d(this.setActiveProject,o.id)},o.name)),i&&(t=s({project:o,editTodoId:this.state.editTodoId,onAddTodo:this.addTodo,onEditTodo:this.editTodo,onToggleTodo:this.toggleTodo,onDoTodo:this.doTodo,onStopDoingTodo:this.stopDoingTodo,onDeleteTodo:this.deleteTodo,onDeleteDoneTodos:this.deleteDoneTodos,onMoveTodo:this.moveTodo}))}}.bind(this)),e.length||e.push(" "),React.DOM.div(null,React.DOM.h1(null,React.DOM.span({className:"control",onClick:d(this.setPage,n.WELCOME)},"reactodo")," ",React.DOM.small(null,this.props.session)),React.DOM.div({className:"tab-bar"},React.DOM.ul({className:"tabs project-tabs"},e),React.DOM.ul({className:"tabs app-tabs"},React.DOM.li({className:r({active:this.state.page===n.SETTINGS}),onClick:d(this.setPage,n.SETTINGS),title:"Settings"},o.SETTINGS))),React.DOM.div({className:"panel"},t))}});e.exports=p},{Constants:"wdPnkL",Page:"KUu2PW",Project:"SRZLho",Settings:"6c+WHz",Welcome:"mHQIBM",classNames:"iaR6wB",extend:"j9RSj1",partial:"qYV9/v",uuid:"K7HSz8"}],"6c+WHz":[function(t,e){"use strict";var o=t("Constants"),n=t("partial"),s=t("trim"),i=React.createClass({displayName:"Settings",getInitialState:function(){return{addingProject:!1,editingProjectName:null}},componentDidUpdate:function(t,e){this.state.addingProject&&!e.addingProject&&this.refs.projectName.getDOMNode().focus(),this.state.editingProjectName&&!e.editingProjectName&&this.refs.editProjectName.getDOMNode().focus()},addProject:function(){if(this.state.addingProject){var t=s(this.refs.projectName.getDOMNode().value);t&&(this.setState({addingProject:!1}),this.props.onAddProject(t))}else this.setState({addingProject:!0})},cancelAddProject:function(){this.setState({addingProject:!1})},editProjectName:function(t){if(null===this.state.editingProjectName)this.setState({editingProjectName:t.id});else{var e=s(this.refs.editProjectName.getDOMNode().value);e&&(this.setState({editingProjectName:null}),this.props.onEditProjectName(t,e))}},cancelEditProjectName:function(){this.setState({editingProjectName:null})},handleAddProjectKeyDown:function(t){t.which===o.ENTER_KEY?this.addProject():t.which===o.ESCAPE_KEY&&this.cancelAddProject()},handleEditProjectNameKeyDown:function(t,e){e.which===o.ENTER_KEY?this.editProjectName(t):e.which===o.ESCAPE_KEY&&this.cancelEditProjectName()},moveProjectUp:function(t,e){this.props.onMoveProjectUp(t,e)},moveProjectDown:function(t,e){this.props.onMoveProjectDown(t,e)},deleteProject:function(t,e){confirm('Are you sure you want to delete "'+t.name+'"?')&&this.props.onDeleteProject(t,e)},toggleProjectVisible:function(t){this.props.onToggleProjectVisible(t)},render:function(){var t;t=this.state.addingProject?React.DOM.span(null,React.DOM.input({type:"text",size:"15",ref:"projectName",onKeyDown:this.handleAddProjectKeyDown})," ",React.DOM.span({className:"button",onClick:this.addProject},"Add")," ",React.DOM.span({className:"button",onClick:this.cancelAddProject},"Cancel")):React.DOM.span({className:"control",onClick:this.addProject,title:"Add Project"},"+");var e=this.props.projects.map(this.renderProject);return React.DOM.div({className:"settings"},React.DOM.h2(null,"[PROJECTS] ",t),React.DOM.p(null,"Click on a project name to edit it."),React.DOM.table(null,React.DOM.thead(null,React.DOM.tr(null,React.DOM.th(null,"Name"),React.DOM.th(null,"Order"),React.DOM.th(null,"Show?"),React.DOM.th(null,"Delete!"))),React.DOM.tbody(null,e)))},renderProject:function(t,e,s){var i,a=0===e,r=e==s.length-1,c=a?React.DOM.span(null,o.NBSP):React.DOM.span({className:"control",onClick:n(this.moveProjectUp,t,e)},o.UP_ARROW),d=r?React.DOM.span(null,o.NBSP):React.DOM.span({className:"control",onClick:n(this.moveProjectDown,t,e)},o.DOWN_ARROW);return i=this.state.editingProjectName===t.id?React.DOM.span(null,React.DOM.input({type:"text",size:"15",defaultValue:t.name,ref:"editProjectName",onKeyDown:n(this.handleEditProjectNameKeyDown,t)})," ",React.DOM.span({className:"button",onClick:n(this.editProjectName,t)},"Edit")," ",React.DOM.span({className:"button",onClick:this.cancelEditProjectName},"Cancel")):React.DOM.span({className:"control",onClick:n(this.editProjectName,t)},t.name),React.DOM.tr({key:t.id},React.DOM.td(null,i),React.DOM.td(null,c,o.NBSP,d),React.DOM.td(null,React.DOM.span({className:"control",onClick:n(this.toggleProjectVisible,t)},"[",t.hidden?o.NBSP:o.CHECK,"]")),React.DOM.td(null,React.DOM.span({className:"button",onClick:n(this.deleteProject,t,e)},"Delete")))}});e.exports=i},{Constants:"wdPnkL",partial:"qYV9/v",trim:"7ze2jr"}],Settings:[function(t,e){e.exports=t("6c+WHz")},{}],ELQgmj:[function(t,e){"use strict";var o=t("Constants"),n=t("classNames"),s=t("normaliseContentEditableHTML"),i=t("partial"),a=React.createClass({displayName:"TodoItem",getInitialState:function(){return{dragging:!1,editing:this.props.initialEdit||!1}},componentDidMount:function(){this.props.initialEdit&&this.refs.text.getDOMNode().focus()},componentDidUpdate:function(t,e){this.state.editing&&!e.editing&&this.refs.text.getDOMNode().focus()},handleTextClick:function(){this.state.editing||this.setState({editing:!0})},handleTextBlur:function(){if(this.state.editing){var t=s(this.refs.text.getDOMNode().innerHTML);this.setState({editing:!1}),t?this.props.onEdit(this.props.todo,t):this.props.onDelete(this.props.todo)}},handleDragStart:function(t){t.nativeEvent.dataTransfer.setData("text",""+this.props.index),this.setState({dragging:!0})},handleDragEnd:function(){this.setState({dragging:!1}),this.props.onDragEnd()},handleDragEnter:function(t){t.preventDefault()},handleDragOver:function(t){t.preventDefault(),t.nativeEvent.dataTransfer.dropEffect="move",this.props.onDragOver(this.props.todo)},handleDrop:function(t){t.preventDefault();var e=t.nativeEvent.dataTransfer.getData("text");this.props.onMoveTodo(e,this.props.index)},handleIE9DragHack:function(t){if(t.preventDefault(),1===window.event.button){var e=t.nativeEvent.target;setTimeout(function(){e.dragDrop()},50)}},render:function(){var t,e=n("todo-item",{"is-todo":!this.props.todo.done,"is-done":this.props.todo.done,"is-doing":this.props.doing,dropzone:!this.props.doing,dragging:this.state.dragging,dragover:this.props.dragover});return this.props.doing||(t=React.DOM.div({className:"todo-item-handle"},React.DOM.span({className:"handle",draggable:"true",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onMouseDown:"undefined"!=typeof window.isIE9&&this.handleIE9DragHack},o.DRAG_HANDLE))),React.DOM.div({className:e,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:!this.props.doing&&this.props.onDragLeave,onDrop:!this.props.doing&&this.handleDrop},React.DOM.div({className:"todo-item-toolbar"},React.DOM.span({className:"control",onClick:i(this.props.onToggle,this.props.todo)},"[",this.props.todo.done?o.CHECK:o.NBSP,"]")),React.DOM.div({className:"todo-item-text",ref:"text",onClick:this.handleTextClick,onBlur:this.handleTextBlur,contentEditable:this.state.editing,dangerouslySetInnerHTML:{__html:this.props.todo.text||" "}}),t)}});e.exports=a},{Constants:"wdPnkL",classNames:"iaR6wB",normaliseContentEditableHTML:"GVTy4I",partial:"qYV9/v"}],TodoItem:[function(t,e){e.exports=t("ELQgmj")},{}],mHQIBM:[function(t,e){"use strict";var o=t("Constants"),n=t("trim"),s=React.createClass({displayName:"Welcome",switchSession:function(){var t=n(this.refs.sessionName.getDOMNode().value);t&&(window.location.search=t)},onSessionNameKeyDown:function(t){t.which===o.ENTER_KEY&&this.switchSession()},render:function(){var t;return t=this.props.session?React.DOM.div(null,React.DOM.p(null,' You are currently using a named session - "',this.props.session,'" - bookmark the current address to easily return to this session again later. '),React.DOM.p(null," If you'd like to switch to another named session enter a name below: ")):React.DOM.div(null,React.DOM.p(null,"You are currently using the default session."),React.DOM.p(null,' If you\'d like to switch to a named session which describes your TODOs (e.g. "work projects" or "personal projects"), enter the name you\'d like to use below: ')),React.DOM.div(null,React.DOM.h2(null,"[WELCOME]"),React.DOM.p(null,"Reactodo is a TODO app with 3 fixed categories - DOING, TODO and DONE - and multiple TODO lists, or projects."),React.DOM.p(null,"TODO lists you create are stored locally, so will only be available on this machine and browser."),React.DOM.p(null,"To set up some projects, click the ",React.DOM.span({className:"control",title:"Settings",onClick:this.props.onShowSettings},o.SETTINGS)," icon, here or over in the corner."),React.DOM.h2(null,"[SESSIONS]"),React.DOM.p(null,"Reactodo allows you to have multiple, independent sessions with their own TODO lists."),t,React.DOM.p(null,React.DOM.input({type:"text",ref:"sessionName",onKeyDown:this.onSessionNameKeyDown})," ",React.DOM.span({className:"button",onClick:this.switchSession},"Switch")),React.DOM.h2(null,"[TIPS]"),React.DOM.ul(null,React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"add a TODO"),", click the ",React.DOM.strong(null,"+")," control beside the project's ",React.DOM.strong(null,"[TODO]")," heading.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"edit a TODO"),", click on its text.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"reorder TODOs"),", drag their ",o.DRAG_HANDLE," handles and drop in the desired location.")),React.DOM.li(null,React.DOM.p(null,"When ",React.DOM.strong(null,"doing a TODO"),", drag and drop it into the project's ",React.DOM.strong(null,"[DOING]")," section.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"complete a TODO"),", click on its [ ] checkbox.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"stop doing a TODO"),", click the ",React.DOM.strong(null,o.STOP)," control beside the project's ",React.DOM.strong(null,"[DOING]")," heading.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"delete a single TODO"),", delete all of its text.")),React.DOM.li(null,React.DOM.p(null,"To ",React.DOM.strong(null,"permanently delete completed TODOs"),", click the ",React.DOM.strong(null,"-")," control beside the project's ",React.DOM.strong(null,"[DONE]")," heading."))))}});e.exports=s},{Constants:"wdPnkL",trim:"7ze2jr"}],Welcome:[function(t,e){e.exports=t("mHQIBM")},{}],classNames:[function(t,e){e.exports=t("iaR6wB")},{}],iaR6wB:[function(t,e){"use strict";function o(t,e){var o=[];"undefined"==typeof e?e=t:o.push(t);for(var n in e)e[n]&&o.push(n);return o.join(" ")}e.exports=o},{}],j9RSj1:[function(t,e){"use strict";function o(t){for(var e=1,o=arguments.length;o>e;e++){var s=arguments[e];if(s&&"object"==typeof s)for(var i in s)n.call(s,i)&&(t[i]=s[i])}return t}var n=Object.prototype.hasOwnProperty;e.exports=o},{}],extend:[function(t,e){e.exports=t("j9RSj1")},{}],19:[function(t){"use strict";var e=t("Reactodo"),o=t("trim"),n=/^\?(.+)/.exec(o(decodeURIComponent(window.location.search))),s=null!=n?n[1]:"";React.renderComponent(e({session:s}),document.getElementById("reactodo"))},{Reactodo:"MWVVbi",trim:"7ze2jr"}],GVTy4I:[function(t,e){"use strict";function o(t){return t=t.replace(s,"\n"),"undefined"!=typeof window.isIE9&&(t=t.replace(i,"").replace(a,"")),n(t)}var n=t("trim"),s=/<br ?\/?>/g,i=/<\/?span[^>]*>/g,a=/^(?:<p>(?:\s|&nbsp;)<\/p>)+$/;e.exports=o},{trim:"7ze2jr"}],normaliseContentEditableHTML:[function(t,e){e.exports=t("GVTy4I")},{}],partial:[function(t,e){e.exports=t("qYV9/v")},{}],"qYV9/v":[function(t,e){"use strict";function o(t){var e=n.call(arguments,1);return function(){return t.apply(this,e.concat(n.call(arguments)))}}var n=Array.prototype.slice;e.exports=o},{}],"7ze2jr":[function(t,e){"use strict";function o(t){return t.replace(n,"")}var n=/^\s+|\s+$/g;e.exports=o},{}],trim:[function(t,e){e.exports=t("7ze2jr")},{}],uuid:[function(t,e){e.exports=t("K7HSz8")},{}],K7HSz8:[function(t,e){"use strict";function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function n(){return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}e.exports=n},{}]},{},[19]);