!function e(t,n,s){function i(r,o){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return i(n?n:e)},c,c.exports,e,t,n,s)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<s.length;r++)i(s[r]);return i}({1:[function(e){"use strict";var t=e("react"),n=e("./DinnerTime"),s=[{id:"a",type:"food",name:"Pizza",time:22,tend:"Rotate"},{id:"b",type:"food",name:"Fish Fingers",time:15,tend:"Flip"},{id:"c",type:"food",name:"Potato Waffles",time:15,tend:"Flip"},{id:"d",type:"food",name:"Rice",time:12,tend:""},{id:"e",type:"food",name:"Beans",time:5,tend:""}];t.render(t.createElement(n,{items:s}),document.getElementById("app"))},{"./DinnerTime":4,react:"react"}],2:[function(e,t){"use strict";t.exports={INPUT:"input",COOKING:"cooking",FINISHED:"finished"}},{}],3:[function(e,t){"use strict";var n=e("react"),s=e("./utils/hhmmss"),i=e("./utils/linebreaks"),a=e("./utils/speech"),r=n.createClass({displayName:"CookingTimer",propTypes:{onFinishedCooking:n.PropTypes.func.isRequired,playStepSound:n.PropTypes.bool,sayInstructions:n.PropTypes.bool,steps:n.PropTypes.array.isRequired},getInitialState:function(){return{timeElapsed:0,timeRemaining:this.props.steps[0].time,timeToNextStep:this.props.steps[0].time-this.props.steps[1].time,stepIndex:0}},componentWillMount:function(){this.announceStep(this.props.steps[0]),this.timer=setInterval(this.tick,1e3)},componentWillUnmount:function(){clearInterval(this.timer)},componentDidUpdate:function(e,t){this.state.stepIndex!=t.stepIndex&&this.announceStep(this.props.steps[this.state.stepIndex]),5==this.state.timeToNextStep&&this.props.playStepSound&&(this.refs.pips.getDOMNode().currentTime=0,this.refs.pips.getDOMNode().play())},announceStep:function(e){this.props.sayInstructions&&a.speak(e.instructions.split("\n").join(". "))},tick:function(){var e=this.state.timeElapsed+1,t=this.state.timeRemaining-1,n=this.state.timeToNextStep-1;return 0===t?this.props.onFinishedCooking():void this.setState(0===n?{timeElapsed:e,timeRemaining:t,timeToNextStep:n,stepIndex:this.state.stepIndex+1}:-1==n?{timeElapsed:e,timeRemaining:t,timeToNextStep:t-this.props.steps[this.state.stepIndex+1].time}:{timeElapsed:e,timeRemaining:t,timeToNextStep:n})},fastForward:function(e){this.setState({timeElapsed:this.state.timeElapsed+e-6,timeRemaining:this.state.timeRemaining-e+6,timeToNextStep:6})},complete:function(){this.setState({timeRemaining:1})},render:function(){var e,t=this.props.steps[this.state.stepIndex],a=this.props.steps[this.state.stepIndex+1];return n.createElement("div",{className:"Wrapper"},n.createElement("div",{className:"Header"},n.createElement("div",{className:"CookingTimer__header"},n.createElement("div",{className:"CookingTimer__title"},"Dinner Time!"),n.createElement("div",{className:"CookingTimer__remaining"},"Time Left: ",s(this.state.timeRemaining)))),n.createElement("div",{className:"Main"},n.createElement("div",{className:"Content"},n.createElement("div",{className:"CookingTimer"},n.createElement("div",{className:"CookingTimer__currentstep"},"[DT-",s(t.time),"] ",i(t.instructions))))),n.createElement("div",{className:"Footer"},n.createElement("div",{className:"CookingTimer__nextstep"},"Next step in ",s(this.state.timeToNextStep),":",n.createElement("div",{className:"CookingTimer__nextinstructions"},i(a.instructions))),e),this.props.playStepSound&&n.createElement("audio",{ref:"pips"},n.createElement("source",{src:"pips.ogg",type:"audio/ogg"})))}});t.exports=r},{"./utils/hhmmss":9,"./utils/linebreaks":11,"./utils/speech":13,react:"react"}],4:[function(e,t){"use strict";var n=e("react/addons"),s=e("./AppStates"),i=e("./calculateSteps"),a=e("./CookingTimer"),r=e("./Finished"),o=e("./Planner"),l=n.createClass({displayName:"DinnerTime",getInitialState:function(){return{appState:s.INPUT,items:null,steps:null,sayInstructions:null,playStepSound:null}},handleStartCooking:function(e){this.setState({appState:s.COOKING,items:e.items,steps:i(e.items),sayInstructions:e.sayInstructions,playStepSound:e.playStepSound})},handleFinishedCooking:function(){this.setState({appState:s.FINISHED})},render:function(){return n.createElement("div",{className:"DinnerTime DinnerTime--"+this.state.appState},this.renderContent())},renderContent:function(){return this.state.appState==s.INPUT?n.createElement(o,{onStartCooking:this.handleStartCooking}):this.state.appState==s.COOKING?n.createElement(a,{steps:this.state.steps,onFinishedCooking:this.handleFinishedCooking,playStepSound:this.state.playStepSound,sayInstructions:this.state.sayInstructions}):this.state.appState==s.FINISHED?n.createElement(r,null):void 0}});t.exports=l},{"./AppStates":2,"./CookingTimer":3,"./Finished":5,"./Planner":6,"./calculateSteps":7,"react/addons":"react/addons"}],5:[function(e,t){"use strict";var n=e("react"),s=e("./utils/speech"),i=n.createClass({displayName:"Finished",componentWillMount:function(){s.speak("It's Dinner Time!")},render:function(){return n.createElement("div",{className:"Wrapper"},n.createElement("div",{className:"Main"},n.createElement("div",{className:"Content"},n.createElement("div",{className:"Finished"},"It's Dinner Time!"))))}});t.exports=i},{"./utils/speech":13,react:"react"}],6:[function(e,t){"use strict";var n=e("newforms"),s=e("react/addons"),i=e("./utils/extend"),a=e("./utils/speech"),r=s.addons.classSet,o=n.Form.extend({name:n.CharField(),time:n.IntegerField({minValue:1,maxLength:3,widget:n.TextInput({attrs:{size:3}})}),tend:n.ChoiceField({required:!1,choices:["","Flip","Rotate"]}),errorCssClass:"error",requiredCssClass:"required",validCssClass:"valid"}),l=n.formsetFactory(o,{extra:3}),p=n.Form.extend({sayInstructions:n.BooleanField({required:!1,label:"Say instructions aloud"}),playStepSound:n.BooleanField({required:!1,label:"Play a sound for new steps"})}),c=s.createClass({displayName:"Planner",propTypes:{onStartCooking:s.PropTypes.func.isRequired},getInitialState:function(){return{itemFormset:new l({onStateChange:this.onFormChange,validation:"auto"}),optionsForm:new p({onStateChange:this.onFormChange,initial:{sayInstructions:a.hasSpeech,playStepSound:!0},validation:"auto"})}},onFormChange:function(){this.forceUpdate()},addItem:function(){this.state.itemFormset.addAnother(),this.forceUpdate()},deleteItem:function(e){this.state.itemFormset.removeForm(e),this.forceUpdate()},onSubmit:function(e){e.preventDefault();var t=this.state.itemFormset,n=this.state.optionsForm;if(-1!=[t.validate(),n.validate()].indexOf(!1))return this.forceUpdate();var s=t.cleanedData();return 0===s.length?(t.addError("Add details of at least one thing to cook."),this.forceUpdate()):void this.props.onStartCooking(i(n.cleanedData,{items:s}))},render:function(){var e=this.state.itemFormset.totalFormCount(),t=this.state.itemFormset.nonFormErrors(),n=this.state.optionsForm.boundFieldsObj();return s.createElement("div",{className:"Wrapper"},s.createElement("div",{className:"Main"},s.createElement("div",{className:"Content"},s.createElement("div",{className:"Input__header"},"Dinner Time!"),s.createElement("p",null,"Enter details of what you need to cook below and Dinner Time! will tell you when to do what."),s.createElement("div",{className:"Input"},t.isPopulated()&&s.createElement("p",{className:"error"},t.first()),s.createElement("form",{onSubmit:this.onSubmit},s.createElement("table",null,s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Cook"),s.createElement("th",null,"For"),s.createElement("th",null,"Tend"),s.createElement("th",null," "))),s.createElement("tbody",null,this.state.itemFormset.forms().map(function(t,n){var i=t.boundFieldsObj();return s.createElement("tr",{key:n,className:r({notempty:t.notEmpty()})},s.createElement("td",{className:i.name.cssClasses()},i.name.render({attrs:{title:i.name.errorMessage()}})),s.createElement("td",{className:i.time.cssClasses()},i.time.render({attrs:{title:i.time.errorMessage()}})," mins"),s.createElement("td",{className:i.tend.cssClasses()},i.tend.render()," ",i.tend.data()&&"halfway"),s.createElement("td",null,e>1&&s.createElement("button",{type:"button",onClick:this.deleteItem.bind(this,n),title:"Remove this food"},"× Delete")))}.bind(this)))),s.createElement("button",{type:"button",onClick:this.addItem,title:"Add more food"},"+ Add More"),s.createElement("div",{className:"Input__options"},a.hasSpeech&&s.createElement("div",{className:"Input__option"},s.createElement("label",null,n.sayInstructions.render()," ",n.sayInstructions.label)),s.createElement("div",{className:"Input__option"},s.createElement("label",null,n.playStepSound.render()," ",n.playStepSound.label))),s.createElement("button",{type:"submit"},"Start Cooking"))))))}});t.exports=c},{"./utils/extend":8,"./utils/speech":13,newforms:"newforms","react/addons":"react/addons"}],7:[function(e,t){"use strict";function n(e){e.forEach(function(t){t.tend&&e.push({type:"tend",name:t.name,time:t.time/2,tendType:t.tend})}),e.sort(function(e,t){return t.time-e.time});var t=[],n=null;e.forEach(function(e){return null==n?(n={start:[e.name],flip:[],rotate:[],time:e.time,instructions:null,duration:null},void t.push(n)):(e.time!=n.time&&(n={start:[],flip:[],rotate:[],time:e.time,instructions:null,duration:null},t.push(n)),void(e.type?"tend"==e.type&&("Flip"==e.tendType?n.flip.push(e.name):"Rotate"==e.tendType&&n.rotate.push(e.name)):n.start.push(e.name)))});var i=null;return t.forEach(function(e){var t="";e.start.length&&(t+="Start cooking "+s(e.start)+"."),t&&e.flip.length&&(t+="\n"),e.flip.length&&(t+="Flip "+s(e.flip)+"."),t&&e.rotate.length&&(t+="\n"),e.rotate.length&&(t+="Rotate "+s(e.rotate)+"."),e.instructions=t,e.time=Math.floor(60*e.time),null!=i&&(i.duration=i.time-e.time),i=e}),t.push({type:"finish",time:0,instructions:"Eat!"}),t}var s=e("./utils/sentenceJoin");t.exports=n},{"./utils/sentenceJoin":12}],8:[function(e,t){"use strict";function n(e,t,n){for(var s=Object.keys(t),i=0,a=s.length;a>i;i++)e[s[i]]=t[s[i]];if(n)for(s=Object.keys(n),i=0,a=s.length;a>i;i++)e[s[i]]=n[s[i]];return e}t.exports=n},{}],9:[function(e,t){"use strict";function n(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60,i=[];return t>0&&i.push(t),i.push(0===t?n:10>n?"0"+n:n),i.push(10>s?"0"+s:s),i.join(":")}t.exports=n},{}],10:[function(e,t){"use strict";function n(e,t){if(e.length<2)return e;var n=[],s=0,i=e.length;if("function"==typeof t)for(;i>s;s++)0!==s&&n.push(t()),n.push(e[s]);else for(;i>s;s++)0!==s&&n.push(t),n.push(e[s]);return n}t.exports=n},{}],11:[function(e,t){"use strict";function n(e){return i(e.split(/\r\n|\r|\n/g),function(){return s.createElement("br",null)})}var s=e("react"),i=e("./intersperse");t.exports=n},{"./intersperse":10,react:"react"}],12:[function(e,t){"use strict";function n(e){return e=e.map(function(e){return"the "+e}),e.length<=2?e.join(" and "):e.slice(0,-1).join(", ")+", and "+e[e.length-1]}t.exports=n},{}],13:[function(e,t){"use strict";function n(e){s&&speechSynthesis.speak(new SpeechSynthesisUtterance(e))}var s="speechSynthesis"in window;t.exports={hasSpeech:s,speak:n}},{}]},{},[1]);