!function e(t,n,i){function s(r,o){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return s(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e){"use strict";var t=e("react"),n=e("./DinnerTime"),i=[{id:"a",type:"food",name:"Pizza",time:22,tend:"Rotate"},{id:"b",type:"food",name:"Fish Fingers",time:15,tend:"Flip"},{id:"c",type:"food",name:"Potato Waffles",time:15,tend:"Flip"},{id:"d",type:"food",name:"Rice",time:12,tend:""},{id:"e",type:"food",name:"Beans",time:5,tend:""}];t.render(t.createElement(n,{items:i}),document.getElementById("app"))},{"./DinnerTime":4,react:"react"}],2:[function(e,t){"use strict";t.exports={INPUT:"input",COOKING:"cooking",FINISHED:"finished"}},{}],3:[function(e,t){"use strict";var n=e("react"),i=e("./utils/hhmmss"),s=e("./utils/linebreaks"),a=e("./utils/speech"),r=n.createClass({displayName:"CookingTimer",propTypes:{onFinishedCooking:n.PropTypes.func.isRequired,playStepSound:n.PropTypes.bool,sayInstructions:n.PropTypes.bool,steps:n.PropTypes.array.isRequired},getInitialState:function(){return{timeElapsed:0,timeRemaining:this.props.steps[0].time,timeToNextStep:this.props.steps[0].time-this.props.steps[1].time,stepIndex:0}},componentWillMount:function(){this.announceStep(this.props.steps[0]),this.timer=setInterval(this.tick,1e3)},componentWillUnmount:function(){clearInterval(this.timer)},componentDidUpdate:function(e,t){this.state.stepIndex!=t.stepIndex&&this.announceStep(this.props.steps[this.state.stepIndex]),5==this.state.timeToNextStep&&this.props.playStepSound&&(this.refs.pips.getDOMNode().currentTime=0,this.refs.pips.getDOMNode().play())},announceStep:function(e){this.props.sayInstructions&&a.speak(e.instructions.split("\n").join(". "))},tick:function(){var e=this.state.timeElapsed+1,t=this.state.timeRemaining-1,n=this.state.timeToNextStep-1;return 0===t?this.props.onFinishedCooking():void this.setState(0===n?{timeElapsed:e,timeRemaining:t,timeToNextStep:n,stepIndex:this.state.stepIndex+1}:-1==n?{timeElapsed:e,timeRemaining:t,timeToNextStep:t-this.props.steps[this.state.stepIndex+1].time}:{timeElapsed:e,timeRemaining:t,timeToNextStep:n})},fastForward:function(e){this.setState({timeElapsed:this.state.timeElapsed+e-6,timeRemaining:this.state.timeRemaining-e+6,timeToNextStep:6})},complete:function(){this.setState({timeRemaining:1})},render:function(){var e,t=this.props.steps[this.state.stepIndex],a=this.props.steps[this.state.stepIndex+1];return n.createElement("div",{className:"Wrapper"},n.createElement("div",{className:"Header"},n.createElement("div",{className:"CookingTimer__header"},n.createElement("div",{className:"CookingTimer__title"},"Dinner Time!"),n.createElement("div",{className:"CookingTimer__remaining"},"Time Left: ",i(this.state.timeRemaining)))),n.createElement("div",{className:"Main"},n.createElement("div",{className:"Content"},n.createElement("div",{className:"CookingTimer"},n.createElement("div",{className:"CookingTimer__currentstep"},"[DT-",i(t.time),"] ",s(t.instructions))))),n.createElement("div",{className:"Footer"},n.createElement("div",{className:"CookingTimer__nextstep"},"Next step in ",i(this.state.timeToNextStep),":",n.createElement("div",{className:"CookingTimer__nextinstructions"},s(a.instructions))),e),this.props.playStepSound&&n.createElement("audio",{ref:"pips"},n.createElement("source",{src:"pips.ogg",type:"audio/ogg"})))}});t.exports=r},{"./utils/hhmmss":9,"./utils/linebreaks":11,"./utils/speech":13,react:"react"}],4:[function(e,t){"use strict";var n=e("react"),i=e("./AppStates"),s=e("./calculateSteps"),a=e("./CookingTimer"),r=e("./Finished"),o=e("./Planner"),l=n.createClass({displayName:"DinnerTime",getInitialState:function(){return{appState:i.INPUT,items:null,steps:null,sayInstructions:null,playStepSound:null}},handleStartCooking:function(e){this.setState({appState:i.COOKING,items:e.items,steps:s(e.items),sayInstructions:e.sayInstructions,playStepSound:e.playStepSound})},handleFinishedCooking:function(){this.setState({appState:i.FINISHED})},render:function(){return n.createElement("div",{className:"DinnerTime DinnerTime--"+this.state.appState},this.renderContent())},renderContent:function(){return this.state.appState==i.INPUT?n.createElement(o,{onStartCooking:this.handleStartCooking}):this.state.appState==i.COOKING?n.createElement(a,{steps:this.state.steps,onFinishedCooking:this.handleFinishedCooking,playStepSound:this.state.playStepSound,sayInstructions:this.state.sayInstructions}):this.state.appState==i.FINISHED?n.createElement(r,null):void 0}});t.exports=l},{"./AppStates":2,"./CookingTimer":3,"./Finished":5,"./Planner":6,"./calculateSteps":7,react:"react"}],5:[function(e,t){"use strict";var n=e("react"),i=e("./utils/speech"),s=n.createClass({displayName:"Finished",componentWillMount:function(){i.speak("It's Dinner Time!")},render:function(){return n.createElement("div",{className:"Wrapper"},n.createElement("div",{className:"Main"},n.createElement("div",{className:"Content"},n.createElement("div",{className:"Finished"},"It's Dinner Time!"))))}});t.exports=s},{"./utils/speech":13,react:"react"}],6:[function(e,t){"use strict";var n=e("newforms"),i=e("react"),s=e("./utils/extend"),a=e("./utils/speech"),r=n.Form.extend({name:n.CharField(),time:n.IntegerField({minValue:1,maxLength:3,widget:n.TextInput({attrs:{size:3}})}),tend:n.ChoiceField({required:!1,choices:["","Flip","Rotate"]}),errorCssClass:"error",requiredCssClass:"required",validCssClass:"valid"}),o=n.FormSet.extend({form:r,extra:3,clean:function(){var e=this.cleanedData();if(0===e.length)throw n.ValidationError("Add details of at least one thing to cook.")}}),l=n.Form.extend({sayInstructions:n.BooleanField({required:!1,label:"Say instructions aloud"}),playStepSound:n.BooleanField({required:!1,label:"Play a sound for new steps"})}),p=i.createClass({displayName:"Planner",propTypes:{onStartCooking:i.PropTypes.func.isRequired},getInitialState:function(){return{itemFormset:new o({onChange:this.onFormChange}),optionsForm:new l({onChange:this.onFormChange,initial:{sayInstructions:a.hasSpeech,playStepSound:!0}})}},onFormChange:function(){this.forceUpdate()},addItem:function(){this.state.itemFormset.addAnother()},deleteItem:function(e){this.state.itemFormset.removeForm(e)},onSubmit:function(e){e.preventDefault();var t=this.state.itemFormset,n=this.state.optionsForm;return-1!=[t.validate(),n.validate()].indexOf(!1)?this.forceUpdate():void this.props.onStartCooking(s(n.cleanedData,{items:t.cleanedData()}))},render:function(){var e=this.state.itemFormset.totalFormCount(),t=this.state.itemFormset.nonFormErrors(),n=this.state.optionsForm.boundFieldsObj();return i.createElement("div",{className:"Wrapper"},i.createElement("div",{className:"Main"},i.createElement("div",{className:"Content"},i.createElement("div",{className:"Input__header"},"Dinner Time!"),i.createElement("p",null,"Enter details of what you need to cook below and Dinner Time! will tell you when to do what."),i.createElement("div",{className:"Input"},t.isPopulated()&&i.createElement("p",{className:"error"},t.first()),i.createElement("form",{onSubmit:this.onSubmit},i.createElement("table",null,i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Cook"),i.createElement("th",null,"For"),i.createElement("th",null,"Tend"),i.createElement("th",null," "))),i.createElement("tbody",null,this.state.itemFormset.forms().map(function(t,n){var s=t.boundFieldsObj();return i.createElement("tr",{key:n,className:t.notEmpty()&&"notempty"},i.createElement("td",{className:s.name.cssClasses()},s.name.render({attrs:{title:s.name.errorMessage()}})),i.createElement("td",{className:s.time.cssClasses()},s.time.render({attrs:{title:s.time.errorMessage()}})," mins"),i.createElement("td",{className:s.tend.cssClasses()},s.tend.render()," ",s.tend.data()&&"halfway"),i.createElement("td",null,e>1&&i.createElement("button",{type:"button",onClick:this.deleteItem.bind(this,n),title:"Remove this food"},"× Delete")))}.bind(this)))),i.createElement("button",{type:"button",onClick:this.addItem,title:"Add more food"},"+ Add More"),i.createElement("div",{className:"Input__options"},a.hasSpeech&&i.createElement("div",{className:"Input__option"},i.createElement("label",null,n.sayInstructions.render()," ",n.sayInstructions.label)),i.createElement("div",{className:"Input__option"},i.createElement("label",null,n.playStepSound.render()," ",n.playStepSound.label))),i.createElement("button",{type:"submit"},"Start Cooking"))))))}});t.exports=p},{"./utils/extend":8,"./utils/speech":13,newforms:"newforms",react:"react"}],7:[function(e,t){"use strict";function n(e){e.forEach(function(t){t.tend&&e.push({type:"tend",name:t.name,time:t.time/2,tendType:t.tend})}),e.sort(function(e,t){return t.time-e.time});var t=[],n=null;e.forEach(function(e){return null==n?(n={start:[e.name],flip:[],rotate:[],time:e.time,instructions:null,duration:null},void t.push(n)):(e.time!=n.time&&(n={start:[],flip:[],rotate:[],time:e.time,instructions:null,duration:null},t.push(n)),void(e.type?"tend"==e.type&&("Flip"==e.tendType?n.flip.push(e.name):"Rotate"==e.tendType&&n.rotate.push(e.name)):n.start.push(e.name)))});var s=null;return t.forEach(function(e){var t="";e.start.length&&(t+="Start cooking "+i(e.start)+"."),t&&e.flip.length&&(t+="\n"),e.flip.length&&(t+="Flip "+i(e.flip)+"."),t&&e.rotate.length&&(t+="\n"),e.rotate.length&&(t+="Rotate "+i(e.rotate)+"."),e.instructions=t,e.time=Math.floor(60*e.time),null!=s&&(s.duration=s.time-e.time),s=e}),t.push({type:"finish",time:0,instructions:"Eat!"}),t}var i=e("./utils/sentenceJoin");t.exports=n},{"./utils/sentenceJoin":12}],8:[function(e,t){"use strict";function n(e,t,n){for(var i=Object.keys(t),s=0,a=i.length;a>s;s++)e[i[s]]=t[i[s]];if(n)for(i=Object.keys(n),s=0,a=i.length;a>s;s++)e[i[s]]=n[i[s]];return e}t.exports=n},{}],9:[function(e,t){"use strict";function n(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,s=[];return t>0&&s.push(t),s.push(0===t?n:10>n?"0"+n:n),s.push(10>i?"0"+i:i),s.join(":")}t.exports=n},{}],10:[function(e,t){"use strict";function n(e,t){if(e.length<2)return e;var n=[],i=0,s=e.length;if("function"==typeof t)for(;s>i;i++)0!==i&&n.push(t()),n.push(e[i]);else for(;s>i;i++)0!==i&&n.push(t),n.push(e[i]);return n}t.exports=n},{}],11:[function(e,t){"use strict";function n(e){return s(e.split(/\r\n|\r|\n/g),function(){return i.createElement("br",null)})}var i=e("react"),s=e("./intersperse");t.exports=n},{"./intersperse":10,react:"react"}],12:[function(e,t){"use strict";function n(e){return e=e.map(function(e){return"the "+e}),e.length<=2?e.join(" and "):e.slice(0,-1).join(", ")+", and "+e[e.length-1]}t.exports=n},{}],13:[function(e,t){"use strict";function n(e){i&&speechSynthesis.speak(new SpeechSynthesisUtterance(e))}var i="speechSynthesis"in window;t.exports={hasSpeech:i,speak:n}},{}]},{},[1]);